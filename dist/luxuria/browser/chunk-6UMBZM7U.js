import{b as ni,c as oi,f as ai}from"./chunk-TKXQTQJV.js";import{a as Me}from"./chunk-BWKDZDJC.js";import{a as It}from"./chunk-BN7COYIM.js";import{e as Dt}from"./chunk-7PPEBWSN.js";import"./chunk-F5X5MWHG.js";import{a as je,b as ti,c as Ge,d as Ue,e as ze}from"./chunk-JJ34EKBD.js";import{a as me,b as xt,c as vt}from"./chunk-VQIKGAAO.js";import{b as ri}from"./chunk-BZP27SCH.js";import{a as pt,b as ut,c as ft,d as gt,e as _t,f as ht,g as Ct,h as kt,i as bt,j as St,l as Se,m as Mt}from"./chunk-53CQG6LB.js";import{a as li,c as yt}from"./chunk-674KBEP4.js";import{e as Et,f as wt,g as de,h as mi,j as Bt,k as di,l as Tt}from"./chunk-HXXT5RSW.js";import{a as nt,b as ot,d as te,e as at,f as rt,g as lt,h as mt,l as ie}from"./chunk-O5DE62TI.js";import{a as it}from"./chunk-GR7DAHDU.js";import{b as ne,c as Q}from"./chunk-XPOLCQDK.js";import{a as le}from"./chunk-RK5RVTEM.js";import{l as ii}from"./chunk-TAUST47P.js";import"./chunk-KV2HKO7R.js";import"./chunk-MS4AQ6UA.js";import"./chunk-3RK6DDJD.js";import"./chunk-VNT5V4M3.js";import{E as j,J as G,K as U,L as z,N as Y,O as ee,P as Je,Q as et,R as tt,p as He,q as We,s as q,t as Ye,w as K,z as L}from"./chunk-XC6ZPLQX.js";import{b as dt,c as ct}from"./chunk-YJ3Z37TG.js";import{f as X,g as Z,i as fe,j as ge,o as N,q as oe,s as ae,t as st,v as re,z as A}from"./chunk-SE4BISY2.js";import{$a as S,Ab as W,C as Le,Ra as ei,Ta as $e,Wa as Qe,Za as J,cb as $,db as _e,g as qt,h as Oe,i as Ne,ib as Xe,j as qe,jb as he,k as Zt,kb as Ze,l as Kt,m as Jt,nb as Ce,ob as ke,q as pe,tb as Ke,w as ue,xb as be,zb as H}from"./chunk-XJPX7IZZ.js";import"./chunk-27NP7QR4.js";import{$b as zt,Ac as o,Bc as B,Cc as M,Dc as Qt,Eb as D,Ec as se,Gc as I,Hc as F,Ic as P,Kb as u,Kc as Ae,Lc as Ve,Nc as Xt,Pc as Re,Rc as Ot,T as Gt,Tb as c,Tc as Nt,Ub as Rt,Yb as v,_b as Ut,ac as Yt,bc as i,cc as e,dc as _,ec as k,f as Ie,fc as b,ha as Fe,hc as w,ma as Pe,mc as h,oc as C,qb as r,tc as V,uc as R,vc as O,wb as x,xa as f,ya as g,zc as y}from"./chunk-YI4P4L32.js";import{a as Te,b as De}from"./chunk-QDSGMOWV.js";function Ci(t,d){t&1&&(i(0,"mat-error"),o(1," First name is required "),e())}function ki(t,d){t&1&&(i(0,"mat-error"),o(1," Please enter a valid email address "),e())}function bi(t,d){t&1&&(i(0,"mat-error"),o(1," Gender is required "),e())}function Si(t,d){t&1&&(i(0,"mat-error"),o(1," Mobile is required "),e())}function Mi(t,d){t&1&&(i(0,"mat-error"),o(1," City is required "),e())}function xi(t,d){t&1&&(i(0,"mat-error"),o(1," Please select date "),e())}function vi(t,d){t&1&&(i(0,"mat-error"),o(1," Please select date "),e())}function yi(t,d){t&1&&(i(0,"mat-error"),o(1," Select Room Type "),e())}function Ei(t,d){t&1&&(i(0,"mat-error"),o(1," Total Person is required "),e())}function wi(t,d){t&1&&(i(0,"mat-error"),o(1," Select Room Type "),e())}var ci=(()=>{class t{constructor(n){this.fb=n,this.bookingForm=this.fb.group({first:["",[S.required,S.pattern("[a-zA-Z]+")]],last:[""],email:["",[S.required,S.email,S.minLength(5)]],gender:["",[S.required]],mobile:["",[S.required]],city:[""],checkIn:["",[S.required]],checkOut:["",[S.required]],totalPerson:["",[S.required]],package:["",[S.required]],roomType:["",[S.required]],address:[""],uploadFile:[""],note:[""]})}onSubmit(){console.log("Form Value",this.bookingForm.value)}static{this.\u0275fac=function(l){return new(l||t)(x(be))}}static{this.\u0275cmp=D({type:t,selectors:[["app-add-booking"]],decls:126,vars:26,consts:[["picker",""],[1,"row"],[1,"col-sm-12"],[1,"form-field-full",3,"ngSubmit","formGroup"],[1,"row","m-b-8"],[1,"col-sm-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","first","required",""],["matInput","","formControlName","last"],["matInput","","formControlName","email","required",""],["formControlName","gender","required",""],[3,"value"],["matInput","","formControlName","mobile","type","number","required",""],["matInput","","formControlName","city","required",""],["appearance","outline","subscriptSizing","dynamic",1,"example-full-width"],[3,"rangePicker"],["matStartDate","","formControlName","checkIn","placeholder","Check In date"],["matEndDate","","formControlName","checkOut","placeholder","Check Out date"],["matIconSuffix","",3,"for"],["formControlName","package","required",""],["matInput","","formControlName","totalPerson","type","number","required",""],["formControlName","roomType","required",""],["matInput","","formControlName","address"],[1,"row","m-b-32"],["formControlName","uploadFile"],["matInput","","formControlName","note"],["mat-flat-button","","color","primary",1,"m-l-8","m-r-8",3,"disabled"],["type","button","mat-flat-button","","color","warn"]],template:function(l,a){if(l&1){let m=w();_(0,"app-page-header"),i(1,"div",1)(2,"div",2)(3,"mat-card")(4,"mat-card-header")(5,"mat-card-subtitle"),o(6,"Add Booking"),e()(),i(7,"mat-card-content")(8,"form",3),h("ngSubmit",function(){return f(m),g(a.onSubmit())}),i(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),o(13,"First name"),e(),_(14,"input",7),u(15,Ci,2,0,"mat-error"),e()(),i(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),o(19,"Last name"),e(),_(20,"input",8),e()()(),i(21,"div",4)(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),o(25,"Email"),e(),_(26,"input",9),u(27,ki,2,0,"mat-error"),e()(),i(28,"div",5)(29,"mat-form-field",6)(30,"mat-label"),o(31,"Gender"),e(),i(32,"mat-select",10)(33,"mat-option",11),o(34," Male "),e(),i(35,"mat-option",11),o(36," Female "),e(),i(37,"mat-option",11),o(38," Other "),e()(),u(39,bi,2,0,"mat-error"),e()()(),i(40,"div",4)(41,"div",5)(42,"mat-form-field",6)(43,"mat-label"),o(44,"Mobile"),e(),_(45,"input",12),u(46,Si,2,0,"mat-error"),e()(),i(47,"div",5)(48,"mat-form-field",6)(49,"mat-label"),o(50,"City"),e(),_(51,"input",13),u(52,Mi,2,0,"mat-error"),e()()(),i(53,"div",4)(54,"div",5)(55,"mat-form-field",14)(56,"mat-label"),o(57,"Enter Check In & Check Out Date"),e(),i(58,"mat-date-range-input",15),_(59,"input",16)(60,"input",17),e(),_(61,"mat-datepicker-toggle",18)(62,"mat-date-range-picker",null,0),u(64,xi,2,0,"mat-error")(65,vi,2,0,"mat-error"),e()(),i(66,"div",5)(67,"mat-form-field",6)(68,"mat-label"),o(69,"Select Package Type"),e(),i(70,"mat-select",19)(71,"mat-option",11),o(72," All inclusive "),e(),i(73,"mat-option",11),o(74," Business "),e(),i(75,"mat-option",11),o(76," Wedding "),e(),i(77,"mat-option",11),o(78," Strater "),e()(),u(79,yi,2,0,"mat-error"),e()()(),i(80,"div",4)(81,"div",5)(82,"mat-form-field",6)(83,"mat-label"),o(84,"Total Person"),e(),_(85,"input",20),u(86,Ei,2,0,"mat-error"),e()(),i(87,"div",5)(88,"mat-form-field",6)(89,"mat-label"),o(90,"Select Room Type"),e(),i(91,"mat-select",21)(92,"mat-option",11),o(93," Delux "),e(),i(94,"mat-option",11),o(95," Super Delux "),e(),i(96,"mat-option",11),o(97," Single "),e(),i(98,"mat-option",11),o(99," Double "),e(),i(100,"mat-option",11),o(101," Vila "),e()(),u(102,wi,2,0,"mat-error"),e()()(),i(103,"div",4)(104,"div",2)(105,"mat-form-field",6)(106,"mat-label"),o(107,"Address"),e(),_(108,"textarea",22),e()()(),i(109,"div",23)(110,"div",2)(111,"mat-label"),o(112,"Upload"),e(),_(113,"app-file-upload",24),e()(),i(114,"div",1)(115,"div",2)(116,"mat-form-field",6)(117,"mat-label"),o(118,"Note"),e(),_(119,"textarea",25),e()()(),i(120,"div",1)(121,"div",2)(122,"button",26),o(123,"Submit"),e(),i(124,"button",27),o(125,"Cancel"),e()()()()()()()()}if(l&2){let m,p,s,E,T,xe,ve,ye,Ee,we,Be=y(63);r(8),c("formGroup",a.bookingForm),r(7),v((m=a.bookingForm.get("first"))!=null&&m.hasError("required")?15:-1),r(12),v((p=a.bookingForm.get("email"))!=null&&p.hasError("email")&&((p=a.bookingForm.get("email"))!=null&&p.touched)?27:-1),r(6),c("value","male"),r(2),c("value","female"),r(2),c("value","other"),r(2),v((s=a.bookingForm.get("gender"))!=null&&s.hasError("required")?39:-1),r(7),v((E=a.bookingForm.get("mobile"))!=null&&E.hasError("required")?46:-1),r(6),v((T=a.bookingForm.get("city"))!=null&&T.hasError("required")?52:-1),r(6),c("rangePicker",Be),r(3),c("for",Be),r(3),v((xe=a.bookingForm.get("checkIn"))!=null&&xe.hasError("required")?64:-1),r(),v((ve=a.bookingForm.get("checkOut"))!=null&&ve.hasError("required")?65:-1),r(6),c("value","All inclusive"),r(2),c("value","Business"),r(2),c("value","Wedding"),r(2),c("value","Strater"),r(2),v((ye=a.bookingForm.get("package"))!=null&&ye.hasError("required")?79:-1),r(7),v((Ee=a.bookingForm.get("totalPerson"))!=null&&Ee.hasError("required")?86:-1),r(6),c("value","Delux"),r(2),c("value","Super Delux"),r(2),c("value","Single"),r(2),c("value","Double"),r(2),c("value","Vila"),r(2),v((we=a.bookingForm.get("roomType"))!=null&&we.hasError("required")?102:-1),r(20),c("disabled",!a.bookingForm.valid)}},dependencies:[le,H,he,J,Ze,$,_e,Ke,A,oe,ae,re,st,W,Ce,ke,U,L,q,Ye,K,Q,ne,Y,z,j,G,ie,te,at,rt,lt,mt,It,N,ge],encapsulation:2})}}return t})();function Bi(t,d){t&1&&(i(0,"mat-error"),o(1," First name is required "),e())}function Ti(t,d){t&1&&(i(0,"mat-error"),o(1," Please enter a valid email address "),e())}function Di(t,d){t&1&&(i(0,"mat-error"),o(1," Gender is required "),e())}function Ii(t,d){t&1&&(i(0,"mat-error"),o(1," Mobile is required "),e())}function Fi(t,d){t&1&&(i(0,"mat-error"),o(1," City is required "),e())}function Pi(t,d){t&1&&(i(0,"mat-error"),o(1," Please select date "),e())}function Ai(t,d){t&1&&(i(0,"mat-error"),o(1," Please select date "),e())}function Vi(t,d){t&1&&(i(0,"mat-error"),o(1," Select Room Type "),e())}function Ri(t,d){t&1&&(i(0,"mat-error"),o(1," Total Person is required "),e())}function Oi(t,d){t&1&&(i(0,"mat-error"),o(1," Select Room Type "),e())}var si=(()=>{class t{constructor(n){this.fb=n,this.formdata={first:"Pooja",last:"Sarma",email:"test@example.com",gender:"female",mobile:"123456789",city:"Surat",checkIn:"2020-02-17T14:22:18Z",checkOut:"2020-02-19T14:22:18Z",totalPerson:"3",roomType:"Delux",package:"Business",address:"101, Elanxa, New Yourk",uploadFile:"",note:"test commit"},this.bookingForm=this.createContactForm()}onSubmit(){console.log("Form Value",this.bookingForm.value)}createContactForm(){return this.fb.group({first:[this.formdata.first,[S.required,S.pattern("[a-zA-Z]+")]],last:[this.formdata.last],email:[this.formdata.email,[S.required,S.email,S.minLength(5)]],gender:[this.formdata.gender,[S.required]],mobile:[this.formdata.mobile,[S.required]],city:[this.formdata.city],checkIn:[this.formdata.checkIn,[S.required]],checkOut:[this.formdata.checkOut,[S.required]],totalPerson:[this.formdata.totalPerson,[S.required]],package:[this.formdata.package,[S.required]],roomType:[this.formdata.roomType,[S.required]],address:[this.formdata.address],uploadFile:[this.formdata.uploadFile],note:[this.formdata.note]})}static{this.\u0275fac=function(l){return new(l||t)(x(be))}}static{this.\u0275cmp=D({type:t,selectors:[["app-edit-booking"]],decls:126,vars:26,consts:[["picker",""],[1,"row"],[1,"col-sm-12"],[1,"form-field-full",3,"ngSubmit","formGroup"],[1,"row","m-b-8"],[1,"col-sm-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","first","required",""],["matInput","","formControlName","last"],["matInput","","formControlName","email","required",""],["formControlName","gender","required",""],[3,"value"],["matInput","","formControlName","mobile","type","number","required",""],["matInput","","formControlName","city","required",""],["appearance","outline","subscriptSizing","dynamic",1,"example-full-width"],[3,"rangePicker"],["matStartDate","","formControlName","checkIn","placeholder","Check In date"],["matEndDate","","formControlName","checkOut","placeholder","Check Out date"],["matIconSuffix","",3,"for"],["formControlName","package","required",""],["matInput","","formControlName","totalPerson","type","number","required",""],["formControlName","roomType","required",""],["matInput","","formControlName","address"],[1,"row","m-b-32"],["formControlName","uploadFile"],["matInput","","formControlName","note"],["mat-flat-button","","color","primary",1,"m-l-8","m-r-8",3,"disabled"],["type","button","mat-flat-button","","color","warn"]],template:function(l,a){if(l&1){let m=w();_(0,"app-page-header"),i(1,"div",1)(2,"div",2)(3,"mat-card")(4,"mat-card-header")(5,"mat-card-subtitle"),o(6,"Edit Booking"),e()(),i(7,"mat-card-content")(8,"form",3),h("ngSubmit",function(){return f(m),g(a.onSubmit())}),i(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),o(13,"First name"),e(),_(14,"input",7),u(15,Bi,2,0,"mat-error"),e()(),i(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),o(19,"Last name"),e(),_(20,"input",8),e()()(),i(21,"div",4)(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),o(25,"Email"),e(),_(26,"input",9),u(27,Ti,2,0,"mat-error"),e()(),i(28,"div",5)(29,"mat-form-field",6)(30,"mat-label"),o(31,"Gender"),e(),i(32,"mat-select",10)(33,"mat-option",11),o(34," Male "),e(),i(35,"mat-option",11),o(36," Female "),e(),i(37,"mat-option",11),o(38," Other "),e()(),u(39,Di,2,0,"mat-error"),e()()(),i(40,"div",4)(41,"div",5)(42,"mat-form-field",6)(43,"mat-label"),o(44,"Mobile"),e(),_(45,"input",12),u(46,Ii,2,0,"mat-error"),e()(),i(47,"div",5)(48,"mat-form-field",6)(49,"mat-label"),o(50,"City"),e(),_(51,"input",13),u(52,Fi,2,0,"mat-error"),e()()(),i(53,"div",4)(54,"div",5)(55,"mat-form-field",14)(56,"mat-label"),o(57,"Enter Check In & Check Out Date"),e(),i(58,"mat-date-range-input",15),_(59,"input",16)(60,"input",17),e(),_(61,"mat-datepicker-toggle",18)(62,"mat-date-range-picker",null,0),u(64,Pi,2,0,"mat-error")(65,Ai,2,0,"mat-error"),e()(),i(66,"div",5)(67,"mat-form-field",6)(68,"mat-label"),o(69,"Select Package Type"),e(),i(70,"mat-select",19)(71,"mat-option",11),o(72," All inclusive "),e(),i(73,"mat-option",11),o(74," Business "),e(),i(75,"mat-option",11),o(76," Wedding "),e(),i(77,"mat-option",11),o(78," Strater "),e()(),u(79,Vi,2,0,"mat-error"),e()()(),i(80,"div",4)(81,"div",5)(82,"mat-form-field",6)(83,"mat-label"),o(84,"Total Person"),e(),_(85,"input",20),u(86,Ri,2,0,"mat-error"),e()(),i(87,"div",5)(88,"mat-form-field",6)(89,"mat-label"),o(90,"Select Room Type"),e(),i(91,"mat-select",21)(92,"mat-option",11),o(93," Delux "),e(),i(94,"mat-option",11),o(95," Super Delux "),e(),i(96,"mat-option",11),o(97," Single "),e(),i(98,"mat-option",11),o(99," Double "),e(),i(100,"mat-option",11),o(101," Vila "),e()(),u(102,Oi,2,0,"mat-error"),e()()(),i(103,"div",4)(104,"div",2)(105,"mat-form-field",6)(106,"mat-label"),o(107,"Address"),e(),_(108,"textarea",22),e()()(),i(109,"div",23)(110,"div",2)(111,"mat-label"),o(112,"Upload"),e(),_(113,"app-file-upload",24),e()(),i(114,"div",1)(115,"div",2)(116,"mat-form-field",6)(117,"mat-label"),o(118,"Note"),e(),_(119,"textarea",25),e()()(),i(120,"div",1)(121,"div",2)(122,"button",26),o(123,"Submit"),e(),i(124,"button",27),o(125,"Cancel"),e()()()()()()()()}if(l&2){let m,p,s,E,T,xe,ve,ye,Ee,we,Be=y(63);r(8),c("formGroup",a.bookingForm),r(7),v((m=a.bookingForm.get("first"))!=null&&m.hasError("required")?15:-1),r(12),v((p=a.bookingForm.get("email"))!=null&&p.hasError("email")&&((p=a.bookingForm.get("email"))!=null&&p.touched)?27:-1),r(6),c("value","male"),r(2),c("value","female"),r(2),c("value","other"),r(2),v((s=a.bookingForm.get("gender"))!=null&&s.hasError("required")?39:-1),r(7),v((E=a.bookingForm.get("mobile"))!=null&&E.hasError("required")?46:-1),r(6),v((T=a.bookingForm.get("city"))!=null&&T.hasError("required")?52:-1),r(6),c("rangePicker",Be),r(3),c("for",Be),r(3),v((xe=a.bookingForm.get("checkIn"))!=null&&xe.hasError("required")?64:-1),r(),v((ve=a.bookingForm.get("checkOut"))!=null&&ve.hasError("required")?65:-1),r(6),c("value","All inclusive"),r(2),c("value","Business"),r(2),c("value","Wedding"),r(2),c("value","Strater"),r(2),v((ye=a.bookingForm.get("package"))!=null&&ye.hasError("required")?79:-1),r(7),v((Ee=a.bookingForm.get("totalPerson"))!=null&&Ee.hasError("required")?86:-1),r(6),c("value","Delux"),r(2),c("value","Super Delux"),r(2),c("value","Single"),r(2),c("value","Double"),r(2),c("value","Vila"),r(2),v((we=a.bookingForm.get("roomType"))!=null&&we.hasError("required")?102:-1),r(20),c("disabled",!a.bookingForm.valid)}},dependencies:[le,H,he,J,Ze,$,_e,Ke,A,oe,ae,re,st,W,Ce,ke,U,L,q,Ye,K,Q,ne,Y,z,j,G,ie,te,at,rt,lt,mt,It,N,ge],encapsulation:2})}}return t})();var pi=(()=>{class t{constructor(n){this.httpClient=n,this.API_URL="assets/data/allBookings.json",this.baseUrl=Me.baseUrl,this.urlEndPoints=Me.urlEndPoints}getAllBookingList(){return this.httpClient.get(this.API_URL)}bookingStatus(n){let l=n;return this.httpClient.post(this.baseUrl+this.urlEndPoints.bookingStatus,l)}getAllBookingLists(){return this.httpClient.get(this.baseUrl+this.urlEndPoints.getAllBookingLists)}addBookings(n){return this.httpClient.post(this.API_URL+"/addBooking",n)}updateAllBookings(n){return this.httpClient.put(this.API_URL+"/updateBooking",n)}deleteAllBookings(n){let l=this.API_URL+"/deleteBooking"+n;return this.httpClient.delete(l)}static{this.\u0275fac=function(l){return new(l||t)(Pe(Le))}}static{this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Yi=["filter"],Qi=["contextMenuTrigger"],Xi=()=>[5,10,25,100],Zi=(t,d,n,l)=>({"badge-solid-yellow":t,"badge-solid-green":d,"badge-solid-red":n,"badge-solid-orange":l}),Ki=(t,d)=>({"badge-solid-green":t,"badge-solid-red":d});function Ji(t,d){if(t&1){let n=w();k(0),i(1,"mat-option")(2,"mat-checkbox",46),h("click",function(a){return f(n),g(a.stopPropagation())}),P("ngModelChange",function(a){let m=f(n).$implicit;return F(m.visible,a)||(m.visible=a),g(a)}),o(3),e()(),b()}if(t&2){let n=d.$implicit;r(2),I("ngModel",n.visible),r(),M(" ",n.label," ")}}function en(t,d){if(t&1&&(i(0,"mat-option",47),o(1),e()),t&2){let n=d.$implicit;c("value",n),r(),B(n)}}function tn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Full Name"),e())}function nn(t,d){if(t&1&&(k(0),o(1),i(2,"div",49),o(3),e(),b()),t&2){let n=C().$implicit;r(),se(" ",n.guest_title," ",n.guest_name," ",n.guest_surname," "),r(2),M(" ",n.groupSize," ")}}function on(t,d){if(t&1&&(i(0,"mat-cell"),u(1,nn,4,4,"ng-container",48),e()),t&2){let n=d.$implicit;r(),c("ngIf",n.isFirstRowOfGroup)}}function an(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Phone"),e())}function rn(t,d){if(t&1&&(k(0),i(1,"span"),o(2),e(),b()),t&2){let n=C().$implicit;r(2),B(n.guest_phone)}}function ln(t,d){if(t&1&&(i(0,"mat-cell"),u(1,rn,3,1,"ng-container",48),e()),t&2){let n=d.$implicit;r(),c("ngIf",n.isFirstRowOfGroup)}}function mn(t,d){t&1&&(i(0,"mat-header-cell",50),o(1,"Check-In"),e())}function dn(t,d){if(t&1&&(i(0,"mat-cell"),o(1),e()),t&2){let n=d.$implicit;r(),B(n.checkInDate)}}function cn(t,d){t&1&&(i(0,"mat-header-cell",50),o(1,"Check-Out"),e())}function sn(t,d){if(t&1&&(i(0,"mat-cell"),o(1),e()),t&2){let n=d.$implicit;r(),B(n.checkOutDate)}}function pn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Room"),e())}function un(t,d){if(t&1&&(i(0,"mat-cell"),o(1),e()),t&2){let n=d.$implicit;r(),B(n.room_name)}}function fn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Package Name"),e())}function gn(t,d){if(t&1&&(i(0,"mat-cell"),o(1),e()),t&2){let n=d.$implicit;r(),B(n.package_name)}}function _n(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Status"),e())}function hn(t,d){if(t&1&&(i(0,"mat-cell")(1,"span",51),o(2),e()()),t&2){let n=d.$implicit;r(),c("ngClass",Re(2,Zi,n.booking_status==="Booked",n.booking_status==="CheckIn",n.booking_status==="CheckOut",n.booking_status==="Cancelled")),r(),M(" ",n.booking_status," ")}}function Cn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Payment"),e())}function kn(t,d){if(t&1&&(i(0,"mat-cell")(1,"span",51),o(2),e()()),t&2){let n=d.$implicit;r(),c("ngClass",Xt(2,Ki,n.payment_status==="Paid",n.payment_status==="UnPaid")),r(),M(" ",n.payment_status," ")}}function bn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Booking Ref"),e())}function Sn(t,d){if(t&1&&(k(0),o(1),b()),t&2){let n=C().$implicit;r(),M(" ",n.booking_reference," ")}}function Mn(t,d){if(t&1&&(i(0,"mat-cell"),u(1,Sn,2,1,"ng-container",48),e()),t&2){let n=d.$implicit;r(),c("ngIf",n.isFirstRowOfGroup)}}function xn(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Booked By"),e())}function vn(t,d){if(t&1&&(k(0),o(1),b()),t&2){let n=C().$implicit;r(),M(" ",n.booked_by," ")}}function yn(t,d){if(t&1&&(i(0,"mat-cell"),u(1,vn,2,1,"ng-container",48),e()),t&2){let n=d.$implicit;r(),c("ngIf",n.isFirstRowOfGroup)}}function En(t,d){t&1&&(i(0,"mat-header-cell"),o(1,"Actions"),e())}function wn(t,d){if(t&1){let n=w();i(0,"mat-cell")(1,"button",52),h("click",function(a){return f(n),g(a.stopPropagation())}),i(2,"mat-icon"),o(3,"more_horiz"),e()(),i(4,"mat-menu",null,4)(6,"button",53),h("click",function(){let a=f(n).$implicit,m=C();return g(m.toggleCheckStatus(a))}),i(7,"mat-icon"),o(8,"logout"),e(),o(9),e()()()}if(t&2){let n=d.$implicit,l=y(5);r(),c("matMenuTriggerFor",l),r(8),M(" ",n.booking_status==="CheckIn"?"Check Out":"Check In"," ")}}function Bn(t,d){t&1&&_(0,"mat-header-row")}function Tn(t,d){t&1&&_(0,"mat-row")}var ui=(()=>{class t{constructor(n,l,a,m){this.dialog=n,this.allBookingService=l,this.snackBar=a,this.datePipe=m,this.columnDefinitions=[{def:"full_name",label:"Full Names",visible:!0},{def:"guest_phone",label:"Phone",type:"phone",visible:!0},{def:"checkInDate",label:"Check-In",type:"date",visible:!0},{def:"checkOutDate",label:"Check-Out",type:"date",visible:!0},{def:"room_name",label:"Room",visible:!0},{def:"package_name",label:"Package Name",visible:!0},{def:"booking_status",label:"Status",type:"status",visible:!0},{def:"payment_status",label:"Payment",type:"payment",visible:!0},{def:"booking_reference",label:"Booking Ref",visible:!0},{def:"booked_by",label:"Booked By",visible:!0}],this.groupedBookings=[],this.dataSource=new Mt([]),this.selection=new Qe(!0,[]),this.destroy$=new Ie,this.contextMenuPosition={x:"0px",y:"0px"},this.isLoading=!0,this.years=[],this.selectedYear=null,this.dateFrom=null,this.dateTo=null}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.loadData()}ngAfterViewInit(){this.dataSource.sort=this.sort}getDisplayedColumns(){return this.columnDefinitions.filter(n=>n.visible!==!1).map(n=>n.def).concat("actions")}refreshTable(){this.paginator.pageIndex=0,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(n){let l=n.target.value.trim().toLowerCase();this.dataSource.filter=l}applyDateFilter(){this.dataSource.filterPredicate=(n,l)=>{let a=new Date(n.checkInDate),m=this.selectedYear?a.getFullYear()===this.selectedYear:!0,p=this.dateFrom?a>=this.dateFrom:!0,s=this.dateTo?a<=this.dateTo:!0;return m&&p&&s},this.dataSource.filter=""+Math.random()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(n=>this.selection.select(n))}loadData(){this.allBookingService.getAllBookingLists().subscribe({next:n=>{let l=n.data,a=[],m={};l.forEach(p=>{let s=p.booking_reference;m[s]||(m[s]=[]),m[s].push(p)});for(let p in m){let s=m[p];s.forEach((E,T)=>{a.push(De(Te({},E),{isFirstRowOfGroup:T===0,groupSize:s.length}))})}this.years=[...new Set(l.map(p=>new Date(p.checkInDate).getFullYear()))],this.dataSource.data=a,console.log("data flat",this.dataSource.data),this.isLoading=!1,this.refreshTable()},error:n=>console.error(n)})}toggleCheckStatus(n){let l=n.booking_status==="CheckIn"?"CheckOut":"CheckIn";this.allBookingService.bookingStatus({booking_reference:n.booking_reference,status:l}).subscribe({next:a=>{n.booking_status=l;let m=new Date().toISOString().split("T")[0];l==="CheckIn"?n.checkInDate=m:n.checkOutDate=m},error:a=>console.error("Status update failed",a)})}showNotification(n,l,a,m){this.snackBar.open(l,"",{duration:2e3,verticalPosition:a,horizontalPosition:m,panelClass:n})}exportExcel(){let n=this.dataSource.filteredData.map(l=>({"Full Names":`${l.guest_title} ${l.guest_name} ${l.guest_surname}`,Phone:l.guest_phone,"Check-In":qt(l.checkInDate,"yyyy-MM-dd","en"),"Check-Out":qt(l.checkOutDate,"yyyy-MM-dd","en"),Room:l.room_name,"Package Name":l.package_name,Status:l.booking_status,Payment:l.payment_status,"Booking Ref":l.booking_reference,"Booked By":l.booked_by}));et.exportToExcel(n,"bookings")}onContextMenu(n,l){n.preventDefault(),this.contextMenuPosition={x:`${n.clientX}px`,y:`${n.clientY}px`},this.contextMenu?.menu&&(this.contextMenu.menuData={item:l},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu())}static{this.\u0275fac=function(l){return new(l||t)(x(de),x(pi),x(Dt),x(pe))}}static{this.\u0275cmp=D({type:t,selectors:[["app-all-booking"]],viewQuery:function(l,a){if(l&1&&(V(ee,5),V(me,5),V(Yi,5),V(Qi,5)),l&2){let m;R(m=O())&&(a.paginator=m.first),R(m=O())&&(a.sort=m.first),R(m=O())&&(a.filter=m.first),R(m=O())&&(a.contextMenu=m.first)}},features:[Ae([{provide:it,useValue:"en-GB"},pe])],decls:87,vars:17,consts:[["filter",""],["pickerFrom",""],["pickerTo",""],["select",""],["actionMenu","matMenu"],[1,"table-header-toolbar"],[1,"row"],[1,"col-sm-4"],[1,"table-header"],["appearance","outline",1,"search-box"],[1,"search-label"],["matInput","","type","text",3,"keyup"],["matSuffix",""],["matInput","","placeholder","From",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["matInput","","placeholder","To",3,"ngModelChange","dateChange","matDatepicker","ngModel"],[1,"right-side-btn"],["mat-icon-button","","matTooltip","Show/Hide Column",1,"text-indigo",3,"click"],[1,"column-filter",2,"width","200px","display","table",3,"ngModelChange","ngModel"],[1,"table-column-label"],[4,"ngFor","ngForOf"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Refresh",1,"tbl-header-btn","text-dark-grey",3,"click"],["mat-icon-button","","matTooltip","Xlsx Download",1,"tbl-header-btn","text-blue",3,"click"],[1,"material-icons-outlined"],[1,"overflow-auto"],[1,"responsive_table"],["mat-table","","matSort","",1,"mat-cell","advance-table",3,"dataSource"],["matColumnDef","full_name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","guest_phone"],["matColumnDef","checkInDate"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","checkOutDate"],["matColumnDef","room_name"],["matColumnDef","package_name"],["matColumnDef","booking_status"],["matColumnDef","payment_status"],["matColumnDef","booking_reference"],["matColumnDef","booked_by"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["color","primary",3,"click","ngModelChange","ngModel"],[3,"value"],[4,"ngIf"],[1,"badge","badge-outline","roomno"],["mat-sort-header",""],[1,"badge",3,"ngClass"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(l,a){if(l&1){let m=w();_(0,"app-page-header"),i(1,"mat-card")(2,"mat-card-header")(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),o(7,"Bookings"),e(),i(8,"mat-form-field",9)(9,"mat-label",10),o(10,"Search..."),e(),i(11,"input",11,0),h("keyup",function(s){return f(m),g(a.applyFilter(s))}),e(),i(13,"mat-icon",12),o(14,"search"),e()()(),i(15,"div",7)(16,"mat-form-field",9)(17,"input",13),P("ngModelChange",function(s){return f(m),F(a.dateFrom,s)||(a.dateFrom=s),g(s)}),h("dateChange",function(){return f(m),g(a.applyDateFilter())}),e(),_(18,"mat-datepicker-toggle",14)(19,"mat-datepicker",null,1),e(),i(21,"mat-form-field",9)(22,"input",15),P("ngModelChange",function(s){return f(m),F(a.dateTo,s)||(a.dateTo=s),g(s)}),h("dateChange",function(){return f(m),g(a.applyDateFilter())}),e(),_(23,"mat-datepicker-toggle",14)(24,"mat-datepicker",null,2),e()(),i(26,"div",7)(27,"div",16)(28,"button",17),h("click",function(){f(m);let s=y(32);return g(s.open())}),i(29,"mat-icon"),o(30,"filter_list"),e(),i(31,"mat-select",18,3),P("ngModelChange",function(s){f(m);let E=y(12);return F(E.value,s)||(E.value=s),g(s)}),i(33,"span",19),o(34,"Show/Hide Column"),e(),u(35,Ji,4,2,"ng-container",20),e()(),i(36,"mat-form-field",9)(37,"mat-label"),o(38,"Filter by Year"),e(),i(39,"mat-select",21),P("ngModelChange",function(s){return f(m),F(a.selectedYear,s)||(a.selectedYear=s),g(s)}),h("selectionChange",function(){return f(m),g(a.applyDateFilter())}),u(40,en,2,2,"mat-option",22),e()(),i(41,"button",23),h("click",function(){return f(m),g(a.refresh())}),i(42,"mat-icon"),o(43,"refresh"),e()(),i(44,"button",24),h("click",function(){return f(m),g(a.exportExcel())}),i(45,"mat-icon",25),o(46,"file_download"),e()()()()()()(),i(47,"mat-card-content")(48,"div",26)(49,"div",27)(50,"table",28),k(51,29),u(52,tn,2,0,"mat-header-cell",30)(53,on,2,1,"mat-cell",31),b(),k(54,32),u(55,an,2,0,"mat-header-cell",30)(56,ln,2,1,"mat-cell",31),b(),k(57,33),u(58,mn,2,0,"mat-header-cell",34)(59,dn,2,1,"mat-cell",31),b(),k(60,35),u(61,cn,2,0,"mat-header-cell",34)(62,sn,2,1,"mat-cell",31),b(),k(63,36),u(64,pn,2,0,"mat-header-cell",30)(65,un,2,1,"mat-cell",31),b(),k(66,37),u(67,fn,2,0,"mat-header-cell",30)(68,gn,2,1,"mat-cell",31),b(),k(69,38),u(70,_n,2,0,"mat-header-cell",30)(71,hn,3,7,"mat-cell",31),b(),k(72,39),u(73,Cn,2,0,"mat-header-cell",30)(74,kn,3,5,"mat-cell",31),b(),k(75,40),u(76,bn,2,0,"mat-header-cell",30)(77,Mn,2,1,"mat-cell",31),b(),k(78,41),u(79,xn,2,0,"mat-header-cell",30)(80,yn,2,1,"mat-cell",31),b(),k(81,42),u(82,En,2,0,"mat-header-cell",30)(83,wn,10,2,"mat-cell",31),b(),u(84,Bn,1,0,"mat-header-row",43)(85,Tn,1,0,"mat-row",44),e()(),_(86,"mat-paginator",45),e()()()}if(l&2){let m=y(12),p=y(20),s=y(25);r(17),c("matDatepicker",p),I("ngModel",a.dateFrom),r(),c("for",p),r(4),c("matDatepicker",s),I("ngModel",a.dateTo),r(),c("for",s),r(8),I("ngModel",m.value),r(4),c("ngForOf",a.columnDefinitions),r(4),I("ngModel",a.selectedYear),r(),c("ngForOf",a.years),r(10),c("dataSource",a.dataSource),r(34),c("matHeaderRowDef",a.getDisplayedColumns()),r(),c("matRowDefColumns",a.getDisplayedColumns()),r(),c("length",a.dataSource.filteredData.length)("pageSize",10)("pageSizeOptions",Ve(16,Xi))}},dependencies:[le,A,oe,ae,re,U,L,q,K,Q,ne,Z,X,N,fe,We,He,Y,z,j,W,J,$,H,Xe,ue,Oe,Ne,qe,G,ct,dt,Se,pt,ft,Ct,gt,ut,kt,_t,ht,bt,St,vt,me,xt,$e,yt,ze,Ge,je,Ue,Je,ee,ie,nt,ot,te],styles:["[_nghost-%COMP%]     .search-box .mat-mdc-text-field-wrapper{height:40px!important}[_nghost-%COMP%]     .search-box .mat-mdc-form-field-flex{margin-top:-7px!important}[_nghost-%COMP%]     .search-box .mat-mdc-floating-label{height:32px}[_nghost-%COMP%]     .search-box .mat-mdc-input-element{font-size:13px!important}[_nghost-%COMP%]     .search-box .search-label{font-size:13px;top:-4px;position:relative}[_nghost-%COMP%]     .column-filter .mat-mdc-select-arrow{display:none}[_nghost-%COMP%]     .advance-table .mat-mdc-header-cell{font-weight:500}[_nghost-%COMP%]     .mat-column-fName{min-width:150px}[_nghost-%COMP%]     .mat-column-mobile{min-width:140px}.roomno[_ngcontent-%COMP%]{background-color:orange;color:#fff}"],data:{animation:[tt]}})}}return t})();var fi=(()=>{class t{constructor(n,l,a){this.dialog=n,this.data=l,this.dialogRef=a}ngOnInit(){console.log("Passed Data",this.data)}static{this.\u0275fac=function(l){return new(l||t)(x(de),x(wt),x(Et))}}static{this.\u0275cmp=D({type:t,selectors:[["app-view-deleted-rooms-modal"]],decls:70,vars:18,consts:[[1,"dialogContainer","details-container"],[1,"modalHeader"],[1,"avatarDetails"],[1,"modalTitle"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["label","Personal Info"],["label","Booking Info"],["label","Payment Info"],["label","Admin"]],template:function(l,a){l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o(4),e()(),i(5,"button",4),h("click",function(){return a.dialogRef.close()}),i(6,"mat-icon"),o(7,"close"),e()()(),i(8,"mat-dialog-content")(9,"mat-tab-group")(10,"mat-tab",5)(11,"p")(12,"strong"),o(13,"Address:"),e(),o(14),e(),i(15,"p")(16,"strong"),o(17,"Phone:"),e(),o(18),e(),i(19,"p")(20,"strong"),o(21,"Email:"),e(),o(22),e()(),i(23,"mat-tab",6)(24,"p")(25,"strong"),o(26,"Check-In:"),e(),o(27),e(),i(28,"p")(29,"strong"),o(30,"Check-Out:"),e(),o(31),e(),i(32,"p")(33,"strong"),o(34,"Booking Ref:"),e(),o(35),e(),i(36,"p")(37,"strong"),o(38," Room Number:"),e(),o(39),e()(),i(40,"mat-tab",7)(41,"p")(42,"strong"),o(43,"Payment Type:"),e(),o(44),e(),i(45,"p")(46,"strong"),o(47,"Payment Status:"),e(),o(48),e(),i(49,"p")(50,"strong"),o(51,"Amount:"),e(),o(52),e()(),i(53,"mat-tab",8)(54,"p")(55,"strong"),o(56,"Canceled By:"),e(),o(57),e(),i(58,"p")(59,"strong"),o(60,"Booked By:"),e(),o(61),e(),i(62,"p")(63,"strong"),o(64,"Refund Status:"),e(),o(65),e(),i(66,"p")(67,"strong"),o(68,"Cancel Reason:"),e(),o(69),e()()()()()),l&2&&(r(4),se("Cancelled Booking: ",a.data==null?null:a.data.guest_title," ",a.data.guest_name," - ",a.data.guest_surname,""),r(10),M(" ",a.data.guest_address,""),r(4),M(" ",a.data.guest_phone,""),r(4),M(" ",a.data.guest_email,""),r(5),M(" ",a.data.checkInDate,""),r(4),M(" ",a.data==null?null:a.data.checkOutDate,""),r(4),M(" ",a.data.booking_reference,""),r(4),Qt(" ",a.data.room_id," / ",a.data.room_name,""),r(5),M(" ",a.data==null?null:a.data.payment_types,""),r(4),M(" ",a.data.refund_status,""),r(4),M(" R",a.data.payment_amount,""),r(5),M(" ",a.data.cancelled_by,""),r(4),M(" ",a.data.booked_by,""),r(4),M(" ",a.data.refund_status,""),r(4),M(" ",a.data.cancellation_reason,""))},dependencies:[Tt,Bt,Z,X,A,Se,ai,ni,oi],styles:[".details-container[_ngcontent-%COMP%]{border-top:4px solid #ffc107;background-color:#f9f9f9;padding:5px;margin:20px auto;max-width:900px}.details-row[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding:10px 0}"]})}}return t})();var gi=(()=>{class t{constructor(n,l,a,m){this.dialog=n,this.fb=l,this.data=a,this.dialogRef=m,this.refundStatus=this.fb.group({refund_status:["",S.required],booking_reference:a.booking_reference})}changeRefundStatus(){this.refundStatus.valid&&this.dialogRef.close(this.refundStatus.value)}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(l){return new(l||t)(x(de),x(be),x(wt),x(Et))}}static{this.\u0275cmp=D({type:t,selectors:[["app-change-refund-status-modal"]],decls:29,vars:2,consts:[[3,"ngSubmit","formGroup"],[1,"dialogContainer"],[1,"modalHeader"],[1,"avatarDetails"],[1,"modalTitle"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],[1,"row"],[1,"col-md-12"],["appearance","outline"],["formControlName","refund_status"],["value","Refunded"],["value","Processing"],["value","Pending"],["value","None"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-stroked-button","","type","button","mat-dialog-close",""]],template:function(l,a){l&1&&(i(0,"form",0),h("ngSubmit",function(){return a.changeRefundStatus()}),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o(5,"Change Refund Status"),e()(),i(6,"button",5),h("click",function(){return a.dialogRef.close()}),i(7,"mat-icon"),o(8,"close"),e()()(),i(9,"mat-dialog-content")(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),o(14,"Refund Status"),e(),i(15,"mat-select",9)(16,"mat-option",10),o(17,"Refunded"),e(),i(18,"mat-option",11),o(19,"Processing"),e(),i(20,"mat-option",12),o(21,"Pending"),e(),i(22,"mat-option",13),o(23,"None"),e()()()()()(),i(24,"mat-dialog-actions",14)(25,"button",15),o(26," Change Refund Status "),e(),i(27,"button",16),o(28,"Close"),e()()()()),l&2&&(c("formGroup",a.refundStatus),r(25),c("disabled",a.refundStatus.invalid))},dependencies:[A,U,L,q,Q,Z,X,N,ge,fe,Y,z,j,W,he,$,_e,Ce,ke,H,ue,G,Tt,mi,di,Bt],encapsulation:2})}}return t})();var _i=(()=>{class t{constructor(n){this.httpClient=n,this.API_URL="assets/data/cancelBookings.json",this.baseUrl=Me.baseUrl,this.urlEndPoints=Me.urlEndPoints}getAllCancelBookings(){return this.httpClient.get(this.API_URL)}getCanceledBookingsLists(){return this.httpClient.get(this.baseUrl+this.urlEndPoints.getCanceledBookingsLists)}addCancelBooking(n){return this.httpClient.post(this.API_URL+"/addCancelBooking",n)}updateCancelBooking(n){return this.httpClient.put(this.API_URL+"/updateCancelBooking",n)}deleteCancelBooking(n){let l=this.API_URL+"/deleteCancelBooking/"+n;return this.httpClient.delete(l)}updateBookingStatus(n){let l=n;return this.httpClient.post(this.baseUrl+this.urlEndPoints.updateBookingStatus,l)}static{this.\u0275fac=function(l){return new(l||t)(Pe(Le))}}static{this.\u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var In=["filter"],Fn=["contextMenuTrigger"],Pn=()=>[5,10,25,100],An=(t,d,n,l)=>({"badge-solid-green":t,"badge-solid-yellow":d,"badge-solid-red":n,"badge-solid-orange":l});function Vn(t,d){if(t&1&&(i(0,"mat-option",51),o(1),e()),t&2){let n=d.$implicit;c("value",n),r(),B(n)}}function Rn(t,d){if(t&1){let n=w();i(0,"mat-option")(1,"mat-checkbox",52),h("click",function(a){return f(n),g(a.stopPropagation())}),P("ngModelChange",function(a){let m=f(n).$implicit;return F(m.visible,a)||(m.visible=a),g(a)}),o(2),e()()}if(t&2){let n=d.$implicit;r(),I("ngModel",n.visible),r(),M(" ",n.label," ")}}function On(t,d){if(t&1){let n=w();i(0,"mat-header-cell",53)(1,"mat-checkbox",54),h("change",function(){f(n);let a=C();return g(a.masterToggle())}),e()()}if(t&2){let n=C();r(),c("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function Nn(t,d){if(t&1){let n=w();i(0,"mat-cell",53)(1,"mat-checkbox",55),h("click",function(a){return f(n),g(a.stopPropagation())})("change",function(){let a=f(n).$implicit,m=C();return g(m.selection.toggle(a))}),e()()}if(t&2){let n=d.$implicit,l=C();r(),c("checked",l.selection.isSelected(n))}}function qn(t,d){t&1&&(i(0,"mat-header-cell",56)(1,"span",57),o(2,"Full Name"),e()())}function Ln(t,d){if(t&1&&(i(0,"mat-cell")(1,"span",58),o(2,"Full Name:"),e(),i(3,"span",57),o(4),e()()),t&2){let n=d.$implicit;r(4),se(" ",n.guest_title," ",n.primary_guest_name||n.guest_name," ",n.guest_surname," ")}}function $n(t,d){if(t&1&&(i(0,"mat-header-cell",56)(1,"span",57),o(2),e()()),t&2){let n=C(2).$implicit;r(2),B(n.label)}}function Hn(t,d){if(t&1&&(k(0),i(1,"span",65)(2,"mat-icon",66),o(3),e(),o(4),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit,a=C();r(),c("ngClass",Re(3,An,n[l.def]==="Refunded",n[l.def]==="Processing",n[l.def]==="Pending",n[l.def]==="None")),r(2),M(" ",a.getRefundIcon(n[l.def])," "),r(),M(" ",n[l.def]," ")}}function Wn(t,d){if(t&1&&(k(0),i(1,"span",57),o(2),Ot(3,"date"),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit;r(2),B(Nt(3,1,n[l.def],"MM/dd/yyyy"))}}function jn(t,d){if(t&1&&(k(0),i(1,"span",57),o(2),Ot(3,"date"),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit;r(2),B(Nt(3,1,n[l.def],"MM/dd/yyyy"))}}function Gn(t,d){if(t&1&&(k(0),i(1,"mat-icon",67),o(2,"mail"),e(),i(3,"span",57),o(4),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit;r(4),B(n[l.def])}}function Un(t,d){if(t&1&&(k(0),i(1,"mat-icon",68),o(2,"call"),e(),i(3,"span",57),o(4),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit;r(4),B(n[l.def])}}function zn(t,d){if(t&1&&(k(0),i(1,"span",57),o(2),e(),b()),t&2){let n=C().$implicit,l=C(2).$implicit;r(2),B(n[l.def])}}function Yn(t,d){if(t&1){let n=w();i(0,"mat-cell",61),h("contextmenu",function(a){let m=f(n).$implicit,p=C(3);return g(p.onContextMenu(a,m))}),i(1,"span",58),o(2),e(),k(3,62),u(4,Hn,5,8,"ng-container",63)(5,Wn,4,4,"ng-container",63)(6,jn,4,4,"ng-container",63)(7,Gn,5,1,"ng-container",63)(8,Un,5,1,"ng-container",63)(9,zn,3,1,"ng-container",64),b(),e()}if(t&2){let n=C(2).$implicit;r(2),M("",n.label,":"),r(),c("ngSwitch",n.def),r(),c("ngSwitchCase","refund_status"),r(),c("ngSwitchCase","checkInDate"),r(),c("ngSwitchCase","checkOutDate"),r(),c("ngSwitchCase","guest_email"),r(),c("ngSwitchCase","guest_phone")}}function Qn(t,d){if(t&1&&(k(0)(1,36),u(2,$n,3,1,"mat-header-cell",37)(3,Yn,10,7,"mat-cell",60),b()()),t&2){let n=C().$implicit;r(),c("matColumnDef",n.def)}}function Xn(t,d){if(t&1&&(k(0),u(1,Qn,4,1,"ng-container",59),b()),t&2){let n=d.$implicit;r(),c("ngIf",n.type!=="check"&&n.type!=="actionBtn"&&n.def!=="full_name")}}function Zn(t,d){t&1&&(i(0,"mat-header-cell",69),o(1,"Actions"),e())}function Kn(t,d){if(t&1){let n=w();i(0,"mat-cell",69)(1,"button",70),h("click",function(a){return f(n),g(a.stopPropagation())}),i(2,"mat-icon"),o(3,"more_horiz"),e()(),i(4,"mat-menu",null,8)(6,"button",71),h("click",function(){let a=f(n).$implicit,m=C();return g(m.viewBooking(a))}),i(7,"mat-icon",72),o(8,"find_in_page"),e(),o(9," View "),e(),i(10,"button",71),h("click",function(){let a=f(n).$implicit,m=C();return g(m.changeStatus(a))}),i(11,"mat-icon",72),o(12,"edit"),e(),o(13," Change Refund Status "),e()()()}if(t&2){let n=y(5);r(),c("matMenuTriggerFor",n)}}function Jn(t,d){t&1&&_(0,"mat-header-row")}function eo(t,d){t&1&&_(0,"mat-row",73),t&2&&(Rt("cursor","pointer"),c("@rowsAnimation",void 0))}function to(t,d){t&1&&(i(0,"div",74),_(1,"mat-progress-spinner",75),e()),t&2&&(r(),c("diameter",40))}function io(t,d){if(t&1){let n=w();i(0,"button",48)(1,"mat-icon"),o(2,"add_circle_outline"),e(),i(3,"span"),o(4,"Add Record"),e()(),i(5,"button",48)(6,"mat-icon",29),o(7,"mode_edit"),e(),i(8,"span"),o(9,"Edit Record"),e()(),i(10,"button",48)(11,"mat-icon"),o(12,"delete_outline"),e(),i(13,"span"),o(14,"Delete Record"),e()(),i(15,"button",71),h("click",function(){f(n);let a=C();return g(a.refresh())}),i(16,"mat-icon"),o(17,"refresh"),e(),i(18,"span"),o(19,"Refresh Record"),e()(),i(20,"button",76)(21,"mat-icon"),o(22,"visibility_off"),e(),i(23,"span"),o(24,"Disable"),e()(),i(25,"button",77)(26,"mat-icon"),o(27,"settings_ethernet"),e(),i(28,"span"),o(29," Nested Menu"),e()()}if(t&2){C();let n=y(79);r(25),c("matMenuTriggerFor",n)}}function no(t,d){t&1&&(i(0,"div",78),o(1," No results "),e())}var hi=(()=>{class t{constructor(n,l,a,m){this.dialog=n,this.toastr=l,this.cancelledBookingService=a,this.snackBar=m,this.columnDefinitions=[{def:"full_name",label:"Full Name",visible:!0},{def:"room_no",label:"Room No",visible:!0},{def:"room_name",label:"Room Type",visible:!0},{def:"booking_reference",label:"Reference No.",visible:!0},{def:"payment_status",label:"Payment Status",visible:!0},{def:"cancellation_reason",label:"Reason",visible:!0},{def:"refund_status",label:"Refund Status",visible:!0},{def:"cancelled_at",label:"Cancelled Date",visible:!0,type:"date"},{def:"cancelled_by",label:"Cancelled By",visible:!0},{def:"actions",label:"Actions",visible:!0,type:"actionBtn"}],this.dataSource=new Mt([]),this.selection=new Qe(!0,[]),this.destroy$=new Ie,this.isLoading=!0,this.years=[],this.contextMenuPosition={x:"0px",y:"0px"},this.selectedYear=null,this.dateFrom=null,this.dateTo=null}ngOnInit(){this.loadCancelledBookings()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.loadCancelledBookings()}getRefundIcon(n){switch(n){case"Refunded":return"check_circle";case"Processing":return"autorenew";case"Pending":return"hourglass_empty";case"None":return"block";default:return"help_outline"}}getDisplayedColumns(){return this.columnDefinitions.filter(n=>n.visible).map(n=>n.def)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}trackByColumnDef(n,l){return l.def}masterToggle(){}applyFilter(n){let l=n.target.value;this.dataSource.filter=l.trim().toLowerCase()}loadCancelledBookings(){this.cancelledBookingService.getCanceledBookingsLists().subscribe({next:n=>{let l=n.data,a=[],m={};l.forEach(p=>{let s=p.booking_reference??"unknown";m[s]||(m[s]=[]),m[s].push(p)});for(let p in m){let s=m[p];s.forEach((E,T)=>{a.push(De(Te({},E),{isFirstRowOfGroup:T===0,groupSize:s.length}))})}this.years=[...new Set(l.filter(p=>!!p.checkInDate).map(p=>new Date(p.checkInDate).getFullYear()))],this.dataSource.data=a,console.log("new canceled",this.dataSource.data),this.isLoading=!1,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(p,s)=>Object.values(p).filter(T=>typeof T=="string"||typeof T=="number").join(" ").toLowerCase().includes(s.trim().toLowerCase())},error:n=>{console.error("Error fetching cancelled bookings:",n),this.isLoading=!1}})}exportExcel(){let n=this.dataSource.filteredData.map(l=>({Title:l.guest_title??"","First Name":l.guest_name??"","Last Name":l.guest_surname??"",Email:l.guest_email??"",Phone:l.guest_phone??"","Room Type":l.room_name??"","Check-In":l.checkInDate??"","Check-Out":l.checkOutDate??"","Reference No.":l.booking_reference??"","Booking Status":l.booking_status??"","Payment Status":l.payment_status??""}));et.exportToExcel(n,"cancelled_bookings")}viewBooking(n){this.dialog.open(fi,{width:"950px",data:n}).afterClosed().subscribe(a=>{})}changeStatus(n){this.dialog.open(gi,{width:"950px",data:n}).afterClosed().subscribe(a=>{if(!a)return;let m={refund_status:a.refund_status,booking_reference:a.booking_reference};this.cancelledBookingService.updateBookingStatus(m).pipe(Gt()).subscribe(p=>{p.status==="success"?(this.toastr.success("Refund status Updated successfully."),location.reload()):this.toastr.error("Update failed.")},()=>{this.toastr.error("Server error during cancellation.")})})}applyDateFilter(){this.dataSource.filterPredicate=(n,l)=>{let a=n.cancelled_at?new Date(n.cancelled_at):null;if(!a)return!1;let m=this.selectedYear?a.getFullYear()===this.selectedYear:!0,p=this.dateFrom?a>=this.dateFrom:!0,s=this.dateTo?a<=this.dateTo:!0;return m&&p&&s},this.dataSource.filter=""+Math.random()}resetDateFilters(){this.selectedYear=null,this.dateFrom=null,this.dateTo=null,this.applyDateFilter()}onContextMenu(n,l){n.preventDefault(),this.contextMenuPosition={x:`${n.clientX}px`,y:`${n.clientY}px`},this.contextMenu?.menu&&(this.contextMenu.menuData={item:l},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu())}static{this.\u0275fac=function(l){return new(l||t)(x(de),x(ii),x(_i),x(Dt))}}static{this.\u0275cmp=D({type:t,selectors:[["app-cancelled-booking"]],viewQuery:function(l,a){if(l&1&&(V(ee,5),V(me,5),V(In,5),V(Fn,5)),l&2){let m;R(m=O())&&(a.paginator=m.first),R(m=O())&&(a.sort=m.first),R(m=O())&&(a.filter=m.first),R(m=O())&&(a.contextMenu=m.first)}},features:[Ae([{provide:it,useValue:"en-GB"}])],decls:98,vars:28,consts:[["filter",""],["fromPicker",""],["toPicker",""],["select",""],["contextMenuTrigger","matMenuTrigger"],["contextMenu","matMenu"],["nestedmenu","matMenu"],["paginator",""],["actionMenu","matMenu"],[1,"table-header-toolbar"],[1,"row"],[1,"col-sm-4"],[1,"table-header"],["appearance","outline",1,"search-box"],[1,"search-label"],["matInput","","type","text",3,"keyup"],["matSuffix",""],[1,"date-filter-row","d-flex","align-items-center","gap-2"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"right-side-btn"],["mat-icon-button","","matTooltip","Delete",1,"tbl-header-btn","text-red",3,"hidden"],["mat-icon-button","","matTooltip","Show/Hide Column",1,"text-indigo",3,"click"],[1,"column-filter",2,"width","200px","display","table",3,"ngModelChange","ngModel"],[1,"table-column-label"],["mat-icon-button","","matTooltip","Refresh",1,"tbl-header-btn","text-dark-grey",3,"click"],["mat-icon-button","","matTooltip","Xlsx Download",1,"tbl-header-btn","text-blue",3,"click"],[1,"material-icons-outlined"],[1,"overflow-auto"],[1,"responsive_table"],["mat-table","","matSort","",1,"mat-cell","advance-table",3,"dataSource"],["matColumnDef","select"],["class","tbl-col-width-per-6",4,"matHeaderCellDef"],["class","tbl-col-width-per-6",4,"matCellDef"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor",4,"matRowDef","matRowDefColumns"],["class","tbl-spinner",4,"ngIf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["matMenuContent",""],["mat-menu-item",""],["class","no-results",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"value"],["color","primary",3,"click","ngModelChange","ngModel"],[1,"tbl-col-width-per-6"],["color","primary",1,"tbl-checkbox",3,"change","checked","indeterminate"],["color","primary",1,"tbl-checkbox",3,"click","change","checked"],["mat-sort-header",""],[1,"truncate-text"],[1,"mobile-label"],[4,"ngIf"],[3,"contextmenu",4,"matCellDef"],[3,"contextmenu"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"badge","d-inline-flex","align-items-center","gap-1",3,"ngClass"],["inline","",1,"tbl-icon"],[1,"tbl-icon","material-icons-outlined","col-red"],[1,"tbl-icon","material-icons-outlined","col-green"],[1,"pr-0"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"tblActionMenuIcon","text-blue"],["matRipple",""],[1,"tbl-spinner"],["color","primary","mode","indeterminate",3,"diameter"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"matMenuTriggerFor"],[1,"no-results"]],template:function(l,a){if(l&1){let m=w();_(0,"app-page-header"),i(1,"mat-card")(2,"mat-card-header")(3,"div",9)(4,"div",10)(5,"div",11)(6,"span",12),o(7,"Cancelled Bookings"),e(),i(8,"mat-form-field",13)(9,"mat-label",14),o(10,"Search..."),e(),i(11,"input",15,0),h("keyup",function(s){return f(m),g(a.applyFilter(s))}),e(),i(13,"mat-icon",16),o(14,"search"),e()()(),i(15,"div",11)(16,"div",17)(17,"mat-form-field",13)(18,"mat-label"),o(19,"Filter by Year"),e(),i(20,"mat-select",18),P("ngModelChange",function(s){return f(m),F(a.selectedYear,s)||(a.selectedYear=s),g(s)}),h("selectionChange",function(){return f(m),g(a.applyDateFilter())}),u(21,Vn,2,2,"mat-option",19),e()(),i(22,"mat-form-field",13)(23,"mat-label"),o(24,"From"),e(),i(25,"input",20),P("ngModelChange",function(s){return f(m),F(a.dateFrom,s)||(a.dateFrom=s),g(s)}),h("dateChange",function(){return f(m),g(a.applyDateFilter())}),e(),_(26,"mat-datepicker-toggle",21)(27,"mat-datepicker",null,1),e(),i(29,"mat-form-field",13)(30,"mat-label"),o(31,"To"),e(),i(32,"input",20),P("ngModelChange",function(s){return f(m),F(a.dateTo,s)||(a.dateTo=s),g(s)}),h("dateChange",function(){return f(m),g(a.applyDateFilter())}),e(),_(33,"mat-datepicker-toggle",21)(34,"mat-datepicker",null,2),e()()(),i(36,"div",11)(37,"div",22)(38,"button",23)(39,"mat-icon"),o(40,"delete_outline"),e()(),i(41,"button",24),h("click",function(){f(m);let s=y(45);return g(s.open())}),i(42,"mat-icon"),o(43,"filter_list"),e(),i(44,"mat-select",25,3),P("ngModelChange",function(s){f(m);let E=y(12);return F(E.value,s)||(E.value=s),g(s)}),i(46,"span",26),o(47,"Show/Hide Column"),e(),zt(48,Rn,3,2,"mat-option",null,Ut),e()(),i(50,"button",27),h("click",function(){return f(m),g(a.resetDateFilters())}),i(51,"mat-icon"),o(52,"refresh"),e()(),i(53,"button",28),h("click",function(){return f(m),g(a.exportExcel())}),i(54,"mat-icon",29),o(55,"file_download"),e()()()()()()(),i(56,"mat-card-content")(57,"div",30)(58,"div",31)(59,"table",32),k(60,33),u(61,On,2,2,"mat-header-cell",34)(62,Nn,2,1,"mat-cell",35),b(),k(63,36),u(64,qn,3,0,"mat-header-cell",37)(65,Ln,5,3,"mat-cell",38),b(),u(66,Xn,2,1,"ng-container",39),k(67,40),u(68,Zn,2,0,"mat-header-cell",41)(69,Kn,14,1,"mat-cell",42),b(),u(70,Jn,1,0,"mat-header-row",43)(71,eo,1,3,"mat-row",44),e()(),u(72,to,2,1,"div",45),_(73,"div",46,4),i(75,"mat-menu",null,5),u(77,io,30,1,"ng-template",47),e(),i(78,"mat-menu",null,6)(80,"button",48)(81,"mat-icon"),o(82,"mail_outline"),e(),i(83,"span"),o(84,"Item 1"),e()(),i(85,"button",48)(86,"mat-icon"),o(87,"turned_in_not"),e(),i(88,"span"),o(89,"Item 2"),e()(),i(90,"button",48)(91,"mat-icon",29),o(92,"sms"),e(),i(93,"span"),o(94,"Item 3"),e()()(),u(95,no,2,0,"div",49),_(96,"mat-paginator",50,7),e()()()}if(l&2){let m=y(12),p=y(28),s=y(35),E=y(76);r(20),I("ngModel",a.selectedYear),r(),c("ngForOf",a.years),r(4),c("matDatepicker",p),I("ngModel",a.dateFrom),r(),c("for",p),r(6),c("matDatepicker",s),I("ngModel",a.dateTo),r(),c("for",s),r(5),c("hidden",!a.selection.hasValue()),r(6),I("ngModel",m.value),r(4),Yt(a.columnDefinitions),r(11),c("dataSource",a.dataSource),r(4),c("matColumnDef","full_name"),r(3),c("ngForOf",a.columnDefinitions)("ngForTrackBy",a.trackByColumnDef),r(4),c("matHeaderRowDef",a.getDisplayedColumns()),r(),c("matRowDefColumns",a.getDisplayedColumns()),r(),c("ngIf",a.isLoading),r(),Rt("left",a.contextMenuPosition.x)("top",a.contextMenuPosition.y),c("matMenuTriggerFor",E),r(22),c("ngIf",!a.isLoading&&a.dataSource.data.length===0),r(),c("length",a.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",Ve(27,Pn))}},dependencies:[le,A,oe,ae,re,U,L,q,K,Q,ne,Z,X,N,fe,We,He,Y,z,j,W,J,$,H,Xe,ue,Oe,Ne,qe,Zt,Kt,Jt,pe,G,ct,dt,Se,pt,ft,Ct,gt,ut,kt,_t,ht,bt,St,vt,me,xt,ie,nt,ot,te,$e,ei,yt,li,ze,Ge,je,ti,Ue,Je,ee],styles:["[_nghost-%COMP%]     .search-box .mat-mdc-text-field-wrapper{height:40px!important}[_nghost-%COMP%]     .search-box .mat-mdc-form-field-flex{margin-top:-7px!important}[_nghost-%COMP%]     .search-box .mat-mdc-floating-label{height:32px}[_nghost-%COMP%]     .search-box .mat-mdc-input-element{font-size:13px!important}[_nghost-%COMP%]     .search-box .search-label{font-size:13px;top:-4px;position:relative}[_nghost-%COMP%]     .column-filter .mat-mdc-select-arrow{display:none}[_nghost-%COMP%]     .advance-table .mat-mdc-header-cell{font-weight:500}[_nghost-%COMP%]     .mat-column-fName{min-width:150px}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;color:#fff;font-size:.75rem;display:inline-block}.badge-solid-green[_ngcontent-%COMP%]{background-color:#28a745}.badge-solid-yellow[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge-solid-red[_ngcontent-%COMP%]{background-color:#dc3545}.badge-solid-orange[_ngcontent-%COMP%]{background-color:#fd7e14}.tbl-icon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}"],data:{animation:[tt]}})}}return t})();var tr=[{path:"",redirectTo:"all-bookings",pathMatch:"full"},{path:"all-bookings",component:ui},{path:"add-booking",component:ci},{path:"edit-booking",component:si},{path:"cancel-bookings",component:hi},{path:"**",component:ri}];export{tr as BOOKINGS_ROUTE};
