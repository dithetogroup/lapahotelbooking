import{b as Rt}from"./chunk-NYP5QJCG.js";import{c as Ke}from"./chunk-L5A4DJEA.js";import{e as Vt}from"./chunk-7PPEBWSN.js";import"./chunk-F5X5MWHG.js";import{a as Le,b as Ne,c as Pe,d as O,e as Ae}from"./chunk-JJ34EKBD.js";import{a as te,b as wt,c as yt}from"./chunk-VQIKGAAO.js";import{b as Jt}from"./chunk-BZP27SCH.js";import{a as ut,b as _t,c as ft,d as Ct,e as bt,f as gt,g as ht,h as xt,i as vt,j as Mt,l as St,m as kt}from"./chunk-53CQG6LB.js";import{a as Dt,c as Et}from"./chunk-674KBEP4.js";import{e as ie,f as ne,g as Tt,h as It,i as Bt,j as oe,k as Ft}from"./chunk-HXXT5RSW.js";import{a as tt,b as it,d as nt,l as ot}from"./chunk-O5DE62TI.js";import{a as Ze,g as et}from"./chunk-GR7DAHDU.js";import{b as Z,c as ee}from"./chunk-XPOLCQDK.js";import{a as pt}from"./chunk-RK5RVTEM.js";import"./chunk-TAUST47P.js";import"./chunk-KV2HKO7R.js";import"./chunk-MS4AQ6UA.js";import"./chunk-3RK6DDJD.js";import{c as dt}from"./chunk-VNT5V4M3.js";import{E as U,J as W,K as X,L as Y,N as J,O as K,P as Xe,Q as Ye,R as Je,p as Ve,q as Re,s as q,t as $e,w as H,z as j}from"./chunk-XC6ZPLQX.js";import{b as at,c as rt}from"./chunk-YJ3Z37TG.js";import{f as N,g as P,i as A,j as $,o as y,q as lt,s as mt,v as ct,z as st}from"./chunk-SE4BISY2.js";import{$a as D,Ab as Q,C as Ie,Ra as Be,Ta as Fe,Wa as Oe,Za as qe,cb as G,db as He,g as Pt,gb as Ut,h as De,ib as je,jb as Ge,kb as Wt,nb as ze,ob as Qe,q as Ee,rb as Xt,sb as Yt,tb as Ue,w as Te,xb as We,zb as z}from"./chunk-XJPX7IZZ.js";import"./chunk-27NP7QR4.js";import{$b as ce,Ac as r,Bc as I,Cc as h,Eb as w,Gc as de,H as B,Hc as pe,Ic as ue,Kb as b,Kc as Se,Lc as ke,Rc as we,Tb as s,Tc as ye,Ub as L,Wb as le,Yb as x,_b as me,ac as se,bc as t,cc as i,da as Ce,dc as C,ec as E,f as he,fc as T,ha as ve,hc as v,ma as Me,mc as _,oc as u,q as xe,qb as m,tc as F,uc as V,vc as R,wb as g,xa as d,ya as p,zc as S}from"./chunk-YI4P4L32.js";import"./chunk-QDSGMOWV.js";var Lt=class{constructor(c){this.id=c.id||this.getRandomID(),this.driverName=c.driverName||"",this.driverContact=c.driverContact||"",this.cabModel=c.cabModel||"",this.licensePlate=c.licensePlate||"",this.status=c.status||"",this.capacity=c.capacity||0,this.lastServiceDate=c.lastServiceDate||"",this.location=c.location||"",this.assignedToGuest=c.assignedToGuest||!1,this.bookingCount=c.bookingCount||0,this.rating=c.rating||0,this.notes=c.notes||""}getRandomID(){let c=()=>(1+Math.random())*65536|0;return c().toString(16)+c().toString(16)}};var _e=(()=>{class o{constructor(e){this.httpClient=e,this.API_URL="assets/data/cabList.json"}getAllCabs(){return this.httpClient.get(this.API_URL).pipe(B(this.handleError))}addCab(e){return this.httpClient.post(this.API_URL,e).pipe(B(this.handleError))}updateCab(e){return this.httpClient.put(`${this.API_URL}/${e.id}`,e).pipe(B(this.handleError))}deleteCab(e){return this.httpClient.delete(`${this.API_URL}/${e}`).pipe(B(this.handleError))}handleError(e){return console.error("An error occurred:",e.message),xe(()=>new Error("Something went wrong; please try again later."))}static{this.\u0275fac=function(a){return new(a||o)(Me(Ie))}}static{this.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function ri(o,c){o&1&&(t(0,"mat-error"),r(1," Driver Name is "),t(2,"strong"),r(3,"required"),i()())}function li(o,c){o&1&&(t(0,"mat-error"),r(1," Driver Contact is "),t(2,"strong"),r(3,"required"),i()())}function mi(o,c){o&1&&(t(0,"mat-error"),r(1," Enter a valid contact number "),i())}function ci(o,c){o&1&&(t(0,"mat-error"),r(1," Status is "),t(2,"strong"),r(3,"required"),i()())}var Kt=(()=>{class o{constructor(e,a,n,l){if(this.dialogRef=e,this.data=a,this.cabService=n,this.fb=l,this.url=null,this.action=a.action,this.action==="edit")this.dialogTitle=`Edit Cab ${a.cab.licensePlate}`,this.cab=a.cab;else{this.dialogTitle="New Cab Record";let f={};this.cab=new Lt(f)}this.cabForm=this.createCabForm()}createCabForm(){return this.fb.group({id:[this.cab.id],driverName:[this.cab.driverName,D.required],driverContact:[this.cab.driverContact,[D.required,D.pattern(/^\+?[1-9]\d{1,14}$/)]],cabModel:[this.cab.cabModel],licensePlate:[this.cab.licensePlate],status:[this.cab.status],capacity:[this.cab.capacity],lastServiceDate:[this.cab.lastServiceDate],location:[this.cab.location],assignedToGuest:[this.cab.assignedToGuest],bookingCount:[this.cab.bookingCount],rating:[this.cab.rating],notes:[this.cab.notes]})}submit(){this.cabForm.valid&&(this.action==="edit"?(console.log("row0----"+this.cabForm.getRawValue()),this.cabService.updateCab(this.cabForm.getRawValue())):this.cabService.addCab(this.cabForm.getRawValue()),this.dialogRef.close(this.cabForm.getRawValue()))}onNoClick(){this.dialogRef.close()}onSelectFile(e){let a=e.target;if(a.files&&a.files[0]){let n=new FileReader;n.readAsDataURL(a.files[0]),n.onload=l=>{l.target&&(this.url=l.target.result)}}}static{this.\u0275fac=function(a){return new(a||o)(g(ie),g(ne),g(_e),g(We))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-form-dialog"]],features:[Se([{provide:Ze,useValue:"en-GB"}])],decls:100,vars:14,consts:[["picker",""],[1,"dialogContainer"],[1,"modalHeader"],[1,"avatarDetails"],[1,"modalTitle"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],[1,"row","m-b-24"],[1,"col-sm-6"],["appearance","outline","subscriptSizing","dynamic",1,"example-full-width"],["matInput","","formControlName","driverName","required",""],["matInput","","formControlName","driverContact","required",""],["matInput","","formControlName","cabModel"],["matInput","","formControlName","licensePlate"],["formControlName","status","required",""],[3,"value"],["matInput","","formControlName","capacity","type","number"],["matInput","","formControlName","lastServiceDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","location"],["formControlName","assignedToGuest","required",""],["matInput","","formControlName","bookingCount","type","number"],["matInput","","formControlName","rating","type","number","step","0.1","min","0","max","5"],["matInput","","formControlName","notes"],[1,"col-sm-12"],[1,"example-button-row"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","warn","tabindex","-1","type","button",3,"click"]],template:function(a,n){if(a&1){let l=v();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),r(4),i()(),t(5,"button",5),_("click",function(){return d(l),p(n.dialogRef.close())}),t(6,"mat-icon"),r(7,"close"),i()()(),t(8,"div",6)(9,"form",7)(10,"div",8)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),r(14,"Driver Name"),i(),C(15,"input",11),b(16,ri,4,0,"mat-error"),i()(),t(17,"div",9)(18,"mat-form-field",10)(19,"mat-label"),r(20,"Driver Contact"),i(),C(21,"input",12),b(22,li,4,0,"mat-error")(23,mi,2,0,"mat-error"),i()()(),t(24,"div",8)(25,"div",9)(26,"mat-form-field",10)(27,"mat-label"),r(28,"Cab Model"),i(),C(29,"input",13),i()(),t(30,"div",9)(31,"mat-form-field",10)(32,"mat-label"),r(33,"License Plate"),i(),C(34,"input",14),i()()(),t(35,"div",8)(36,"div",9)(37,"mat-form-field",10)(38,"mat-label"),r(39,"Status"),i(),t(40,"mat-select",15)(41,"mat-option",16),r(42,"Available"),i(),t(43,"mat-option",16),r(44,"In Use"),i(),t(45,"mat-option",16),r(46,"Maintenance"),i()(),b(47,ci,4,0,"mat-error"),i()(),t(48,"div",9)(49,"mat-form-field",10)(50,"mat-label"),r(51,"Capacity"),i(),C(52,"input",17),i()()(),t(53,"div",8)(54,"div",9)(55,"mat-form-field",10)(56,"mat-label"),r(57,"Last Service Date"),i(),C(58,"input",18)(59,"mat-datepicker-toggle",19)(60,"mat-datepicker",null,0),i()(),t(62,"div",9)(63,"mat-form-field",10)(64,"mat-label"),r(65,"Location"),i(),C(66,"input",20),i()()(),t(67,"div",8)(68,"div",9)(69,"mat-form-field",10)(70,"mat-label"),r(71,"Assigned to Guest"),i(),t(72,"mat-select",21)(73,"mat-option",16),r(74,"Yes"),i(),t(75,"mat-option",16),r(76,"No"),i()()()(),t(77,"div",9)(78,"mat-form-field",10)(79,"mat-label"),r(80,"Booking Count"),i(),C(81,"input",22),i()()(),t(82,"div",8)(83,"div",9)(84,"mat-form-field",10)(85,"mat-label"),r(86,"Rating"),i(),C(87,"input",23),i()(),t(88,"div",9)(89,"mat-form-field",10)(90,"mat-label"),r(91,"Notes"),i(),C(92,"textarea",24),i()()(),t(93,"div",8)(94,"div",25)(95,"div",26)(96,"button",27),_("click",function(){return d(l),p(n.submit())}),r(97,"Save"),i(),t(98,"button",28),_("click",function(){return d(l),p(n.onNoClick())}),r(99,"Cancel"),i()()()()()()()}if(a&2){let l,f,M,k,ae=S(61);m(4),h(" ",n.dialogTitle," "),m(5),s("formGroup",n.cabForm),m(7),x((l=n.cabForm.get("driverName"))!=null&&l.hasError("required")||(l=n.cabForm.get("driverName"))!=null&&l.touched?16:-1),m(6),x((f=n.cabForm.get("driverContact"))!=null&&f.hasError("required")||(f=n.cabForm.get("driverContact"))!=null&&f.touched?22:-1),m(),x((M=n.cabForm.get("driverContact"))!=null&&M.hasError("pattern")?23:-1),m(18),s("value","Available"),m(2),s("value","In Use"),m(2),s("value","Maintenance"),m(2),x((k=n.cabForm.get("status"))!=null&&k.hasError("required")?47:-1),m(11),s("matDatepicker",ae),m(),s("for",ae),m(14),s("value",!0),m(2),s("value",!1),m(21),s("disabled",!n.cabForm.valid)}},dependencies:[y,$,A,P,N,oe,z,Ge,qe,Wt,G,He,Ue,Yt,Xt,Q,ze,Qe,X,j,q,$e,H,ee,Z,Ke,ot,tt,it,nt,J,Y,U,W,et,Rt],styles:[".hoverable[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:36px;width:36px;border-radius:50%}.hoverable[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;font-size:10px;transform:translate(-50%,-50%);z-index:2}.hoverable[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;inset:0;background-color:#ffffff80;pointer-events:none;border-radius:50%;z-index:1}.hoverable[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%], .hoverable[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#tableFileInput[_ngcontent-%COMP%]{display:none}"]})}}return o})();var Zt=(()=>{class o{constructor(e,a,n){this.dialogRef=e,this.data=a,this.cabService=n}onNoClick(){this.dialogRef.close()}confirmDelete(){this.cabService.deleteCab(this.data.id),this.dialogRef.close(this.data.id)}static{this.\u0275fac=function(a){return new(a||o)(g(ie),g(ne),g(_e))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-list-delete"]],decls:25,vars:4,consts:[[1,"dialogContainer"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"delete-list"],[1,"font-weight-bold"],["mat-dialog-actions","",1,"mb-1"],["mat-flat-button","","color","warn",3,"click","mat-dialog-close"],["mat-flat-button","","tabindex","-1",3,"click"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"h3",1),r(2,"Are you sure?"),i(),t(3,"div",2)(4,"ul",3)(5,"li")(6,"p")(7,"span",4),r(8," Cab Model: "),i(),r(9),i()(),t(10,"li")(11,"p")(12,"span",4),r(13,"License Plate: "),i(),r(14),i()(),t(15,"li")(16,"p")(17,"span",4),r(18,"Driver Name "),i(),r(19),i()()()(),t(20,"div",5)(21,"button",6),_("click",function(){return n.confirmDelete()}),r(22," Delete "),i(),t(23,"button",7),_("click",function(){return n.onNoClick()}),r(24,"Cancel"),i()()()),a&2&&(m(9),I(n.data.cabModel),m(5),h("",n.data.licensePlate," "),m(5),h("",n.data.driverName," "),m(2),s("mat-dialog-close",1))},dependencies:[Bt,oe,Ft,y,$,It],styles:[".delete-list[_ngcontent-%COMP%]{padding:0;list-style-type:none}"]})}}return o})();var vi=["filter"],Mi=()=>[5,10,25,100];function Si(o,c){if(o&1){let e=v();t(0,"div")(1,"mat-option")(2,"mat-checkbox",40),_("click",function(n){return d(e),p(n.stopPropagation())}),ue("ngModelChange",function(n){let l=d(e).$implicit;return pe(l.visible,n)||(l.visible=n),p(n)}),r(3),i()()()}if(o&2){let e=c.$implicit;m(2),de("ngModel",e.visible),m(),h(" ",e.label," ")}}function ki(o,c){if(o&1){let e=v();t(0,"mat-header-cell",41)(1,"mat-checkbox",42),_("change",function(n){d(e);let l=u();return p(n?l.masterToggle():null)}),i()()}if(o&2){let e=u();s("ngClass","tbl-col-width-per-6"),m(),s("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("ngClass","tbl-checkbox")}}function wi(o,c){if(o&1){let e=v();t(0,"mat-cell",41)(1,"mat-checkbox",43),_("click",function(n){return d(e),p(n.stopPropagation())})("change",function(n){let l=d(e).$implicit,f=u();return p(n?f.selection.toggle(l):null)}),i()()}if(o&2){let e=c.$implicit,a=u();s("ngClass","tbl-col-width-per-6"),m(),s("checked",a.selection.isSelected(e))("ngClass","tbl-checkbox")}}function yi(o,c){}function Di(o,c){if(o&1&&(t(0,"mat-header-cell",47)(1,"span",48),r(2),i()()),o&2){let e=u(3).$implicit;m(2),I(e.label)}}function Ei(o,c){if(o&1){let e=v();t(0,"mat-cell",49),_("contextmenu",function(n){let l=d(e).$implicit,f=u(4);return p(f.onContextMenu(n,l))}),t(1,"span",50),r(2),i(),t(3,"span",48),r(4),we(5,"date"),i()()}if(o&2){let e=c.$implicit,a=u(3).$implicit;m(2),h("",a.label,":"),m(2),h(" ",ye(5,2,e[a.def],"MM/dd/yyyy"),"")}}function Ti(o,c){if(o&1&&(E(0,44),b(1,Di,3,1,"mat-header-cell",45)(2,Ei,6,5,"mat-cell",46),T()),o&2){let e=u(2).$implicit;s("matColumnDef",e.def)}}function Ii(o,c){if(o&1&&(t(0,"mat-header-cell",47)(1,"span",48),r(2),i()()),o&2){let e=u(4).$implicit;m(2),I(e.label)}}function Bi(o,c){if(o&1&&(t(0,"div")(1,"span",53),r(2),i()()),o&2){let e=u().$implicit;m(2),h(" ",e.status,"")}}function Fi(o,c){if(o&1&&(t(0,"div")(1,"span",54),r(2),i()()),o&2){let e=u().$implicit;m(2),h(" ",e.status,"")}}function Vi(o,c){if(o&1&&(t(0,"div")(1,"span",55),r(2),i()()),o&2){let e=u().$implicit;m(2),h(" ",e.status,"")}}function Ri(o,c){if(o&1){let e=v();t(0,"mat-cell",52),_("contextmenu",function(n){let l=d(e).$implicit,f=u(5);return p(f.onContextMenu(n,l))}),t(1,"span",50),r(2),i(),b(3,Bi,3,1,"div")(4,Fi,3,1,"div")(5,Vi,3,1,"div"),i()}if(o&2){let e=c.$implicit,a=u(4).$implicit;m(2),h("",a.label,":"),m(),x(e.status==="Available"?3:-1),m(),x(e.status==="In Use"?4:-1),m(),x(e.status==="Maintenance"?5:-1)}}function Li(o,c){if(o&1&&(E(0,44),b(1,Ii,3,1,"mat-header-cell",45)(2,Ri,6,4,"mat-cell",51),T()),o&2){let e=u(3).$implicit;s("matColumnDef",e.def)}}function Ni(o,c){if(o&1&&(t(0,"mat-header-cell",47)(1,"span",48),r(2),i()()),o&2){let e=u(4).$implicit;m(2),I(e.label)}}function Pi(o,c){if(o&1){let e=v();t(0,"mat-cell",49),_("contextmenu",function(n){let l=d(e).$implicit,f=u(5);return p(f.onContextMenu(n,l))}),t(1,"span",50),r(2),i(),t(3,"span",48),r(4),i()()}if(o&2){let e=c.$implicit,a=u(4).$implicit;m(2),h("",a.label,":"),m(2),h(" ",e[a.def],"")}}function Ai(o,c){if(o&1&&(E(0,44),b(1,Ni,3,1,"mat-header-cell",45)(2,Pi,5,2,"mat-cell",46),T()),o&2){let e=u(3).$implicit;s("matColumnDef",e.def)}}function $i(o,c){if(o&1&&b(0,Li,3,1,"ng-container",44)(1,Ai,3,1,"ng-container",44),o&2){let e=u(2).$implicit;x(e.def==="status"?0:1)}}function Oi(o,c){if(o&1&&b(0,Ti,3,1,"ng-container",44)(1,$i,2,1),o&2){let e=u().$implicit;x(e.type==="date"?0:1)}}function qi(o,c){if(o&1&&b(0,yi,0,0)(1,Oi,2,1),o&2){let e=c.$implicit;x(e.type==="check"||e.type==="actionBtn"?0:1)}}function Hi(o,c){o&1&&(t(0,"mat-header-cell",56),r(1,"Actions"),i())}function ji(o,c){if(o&1){let e=v();t(0,"mat-cell",56)(1,"button",57),_("click",function(n){return d(e),p(n.stopPropagation())})("click",function(){let n=d(e).$implicit,l=u();return p(l.editCall(n))}),C(2,"app-feather-icons",58),i(),t(3,"button",57),_("click",function(n){return d(e),p(n.stopPropagation())})("click",function(){let n=d(e).$implicit,l=u();return p(l.deleteItem(n))}),C(4,"app-feather-icons",58),i()()}o&2&&(m(2),le("tbl-fav-edit"),s("icon","edit"),m(2),le("tbl-fav-delete"),s("icon","trash-2"))}function Gi(o,c){o&1&&C(0,"mat-header-row")}function zi(o,c){if(o&1){let e=v();t(0,"mat-row",59),_("click",function(){let n=d(e).$implicit,l=u();return p(l.editCall(n))}),i()}o&2&&(L("cursor","pointer"),s("@rowsAnimation",void 0))}function Qi(o,c){o&1&&(t(0,"div",34),C(1,"mat-progress-spinner",60),i()),o&2&&(m(),s("diameter",40))}function Ui(o,c){if(o&1){let e=v();t(0,"button",61),_("click",function(){d(e);let n=u();return p(n.addNew())}),t(1,"mat-icon"),r(2,"add_circle_outline"),i(),t(3,"span"),r(4,"Add Record"),i()(),t(5,"button",61),_("click",function(){let n=d(e).item,l=u();return p(l.editCall(n))}),t(6,"mat-icon",22),r(7,"mode_edit"),i(),t(8,"span"),r(9,"Edit Record"),i()(),t(10,"button",61),_("click",function(){let n=d(e).item,l=u();return p(l.deleteItem(n))}),t(11,"mat-icon"),r(12,"delete_outline"),i(),t(13,"span"),r(14,"Delete Record"),i()(),t(15,"button",61),_("click",function(){d(e);let n=u();return p(n.refresh())}),t(16,"mat-icon"),r(17,"refresh"),i(),t(18,"span"),r(19,"Refresh Record"),i()(),t(20,"button",62)(21,"mat-icon"),r(22,"visibility_off"),i(),t(23,"span"),r(24,"Disable"),i()(),t(25,"button",63)(26,"mat-icon"),r(27,"settings_ethernet"),i(),t(28,"span"),r(29," Nested Menu"),i()()}if(o&2){u();let e=S(58);m(25),s("matMenuTriggerFor",e)}}function Wi(o,c){if(o&1&&(t(0,"div",64),r(1," No results "),i()),o&2){let e=u();L("display",e.dataSource.data.length===0?"":"none")}}var ei=(()=>{class o{constructor(e,a,n){this.dialog=e,this.cabService=a,this.snackBar=n,this.columnDefinitions=[{def:"select",label:"Checkbox",type:"check",visible:!0},{def:"driverName",label:"Driver Name",type:"text",visible:!0},{def:"driverContact",label:"Driver Contact",type:"text",visible:!0},{def:"cabModel",label:"Cab Model",type:"text",visible:!0},{def:"licensePlate",label:"License Plate",type:"text",visible:!0},{def:"status",label:"Status",type:"text",visible:!0},{def:"capacity",label:"Capacity",type:"number",visible:!0},{def:"lastServiceDate",label:"Last Service Date",type:"date",visible:!0},{def:"location",label:"Location",type:"text",visible:!1},{def:"bookingCount",label:"Booking Count",type:"number",visible:!1},{def:"rating",label:"Rating",type:"number",visible:!1},{def:"notes",label:"Notes",type:"text",visible:!1},{def:"actions",label:"Actions",type:"actionBtn",visible:!0}],this.dataSource=new kt([]),this.selection=new Oe(!0,[]),this.destroy$=new he,this.contextMenuPosition={x:"0px",y:"0px"},this.isLoading=!0}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.loadData()}getDisplayedColumns(){return this.columnDefinitions.filter(e=>e.visible).map(e=>e.def)}addNew(){this.openDialog("add")}editCall(e){this.openDialog("edit",e)}openDialog(e,a){this.dialog.open(Kt,{width:"60vw",maxWidth:"100vw",data:{cab:a,action:e},autoFocus:!1}).afterClosed().subscribe(l=>{l&&(e==="add"?this.dataSource.data=[l,...this.dataSource.data]:this.updateRecord(l),this.refreshTable(),this.showNotification(e==="add"?"snackbar-success":"black",`${e==="add"?"Add":"Edit"} Record Successfully...!!!`,"bottom","center"))})}updateRecord(e){let a=this.dataSource.data.findIndex(n=>n.id===e.id);a!==-1&&(this.dataSource.data[a]=e,this.dataSource._updateChangeSubscription())}deleteItem(e){this.dialog.open(Zt,{data:e}).afterClosed().subscribe(n=>{n&&(this.dataSource.data=this.dataSource.data.filter(l=>l.id!==e.id),this.refreshTable(),this.showNotification("snackbar-danger","Delete Record Successfully...!!!","bottom","center"))})}refreshTable(){this.paginator.pageIndex=0,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){let a=e.target.value.trim().toLowerCase();this.dataSource.filter=a}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}removeSelectedRows(){let e=this.selection.selected.length;this.dataSource.data=this.dataSource.data.filter(a=>!this.selection.selected.includes(a)),this.selection.clear(),this.showNotification("snackbar-danger",`${e} Record(s) Deleted Successfully...!!!`,"bottom","center")}loadData(){this.cabService.getAllCabs().subscribe({next:e=>{this.dataSource.data=e,this.isLoading=!1,this.refreshTable(),this.dataSource.filterPredicate=(a,n)=>Object.values(a).some(l=>l.toString().toLowerCase().includes(n))},error:e=>console.error(e)})}showNotification(e,a,n,l){this.snackBar.open(a,"",{duration:2e3,verticalPosition:n,horizontalPosition:l,panelClass:e})}exportExcel(){let e=this.dataSource.data.map(a=>({"Driver Name":a.driverName,"Driver Contact":a.driverContact,"Cab Model":a.cabModel,"License Plate":a.licensePlate,Status:a.status,Capacity:a.capacity,"Last Service Date":a.lastServiceDate,Location:a.location,"Booking Count":a.bookingCount,Rating:a.rating,Notes:a.notes}));Ye.exportToExcel(e,"Cab Data")}onContextMenu(e,a){e.preventDefault(),this.contextMenuPosition={x:`${e.clientX}px`,y:`${e.clientY}px`},this.contextMenu&&(this.contextMenu.menuData={item:a},this.contextMenu.menu?.focusFirstItem("mouse"),this.contextMenu.openMenu())}static{this.\u0275fac=function(a){return new(a||o)(g(Tt),g(_e),g(Vt))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-list"]],viewQuery:function(a,n){if(a&1&&(F(K,5),F(te,5),F(vi,5),F(O,5)),a&2){let l;V(l=R())&&(n.paginator=l.first),V(l=R())&&(n.sort=l.first),V(l=R())&&(n.filter=l.first),V(l=R())&&(n.contextMenu=l.first)}},decls:77,vars:17,consts:[["filter",""],["select",""],["contextMenu","matMenu"],["nestedmenu","matMenu"],["paginator",""],[1,"table-header-toolbar"],[1,"row"],[1,"col-sm-8"],[1,"table-header"],["appearance","outline",1,"search-box"],[1,"search-label"],["matInput","","type","text",3,"keyup"],["matSuffix",""],[1,"col-sm-4"],[1,"right-side-btn"],["mat-icon-button","","matTooltip","Delete",1,"tbl-header-btn","text-red",3,"click","hidden"],["mat-icon-button","","matTooltip","Show/Hide Column",1,"text-indigo",3,"click"],[1,"column-filter",2,"width","200px","display","table",3,"ngModelChange","ngModel"],[1,"table-column-label"],["mat-icon-button","","matTooltip","Add",1,"tbl-header-btn","text-green",3,"click"],["mat-icon-button","","matTooltip","Refresh",1,"tbl-header-btn","text-dark-grey",3,"click"],["mat-icon-button","","matTooltip","Xlsx Download",1,"tbl-header-btn","text-blue",3,"click"],[1,"material-icons-outlined"],[1,"overflow-auto"],[1,"responsive_table"],["mat-table","","matSort","",1,"mat-cell","advance-table",3,"dataSource"],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor","click",4,"matRowDef","matRowDefColumns"],[1,"tbl-spinner"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["matMenuContent",""],["mat-menu-item",""],[1,"no-results",3,"display"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["color","primary",3,"click","ngModelChange","ngModel"],[3,"ngClass"],["color","primary",3,"change","checked","indeterminate","ngClass"],["color","primary",3,"click","change","checked","ngClass"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"contextmenu",4,"matCellDef"],["mat-sort-header",""],[1,"truncate-text"],[3,"contextmenu"],[1,"mobile-label"],["mat-cell","",3,"contextmenu",4,"matCellDef"],["mat-cell","",3,"contextmenu"],[1,"badge","badge-solid-green","truncate-text"],[1,"badge","badge-solid-orange","truncate-text"],[1,"badge","badge-solid-red","truncate-text"],[1,"pr-0"],["mat-icon-button","","color","accent",1,"tbl-action-btn",3,"click"],[3,"icon"],["matRipple","",3,"click"],["color","primary","mode","indeterminate",3,"diameter"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"matMenuTriggerFor"],[1,"no-results"]],template:function(a,n){if(a&1){let l=v();C(0,"app-page-header"),t(1,"mat-card")(2,"mat-card-header")(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),r(7,"Cab List"),i(),t(8,"mat-form-field",9)(9,"mat-label",10),r(10,"Search..."),i(),t(11,"input",11,0),_("keyup",function(M){return d(l),p(n.applyFilter(M))}),i(),t(13,"mat-icon",12),r(14,"search"),i()()(),t(15,"div",13)(16,"div",14)(17,"button",15),_("click",function(){return d(l),p(n.removeSelectedRows())}),t(18,"mat-icon"),r(19,"delete_outline"),i()(),t(20,"button",16),_("click",function(){d(l);let M=S(24);return p(M.open())}),t(21,"mat-icon"),r(22,"filter_list"),i(),t(23,"mat-select",17,1),ue("ngModelChange",function(M){d(l);let k=S(12);return pe(k.value,M)||(k.value=M),p(M)}),t(25,"span",18),r(26,"Show/Hide Column"),i(),ce(27,Si,4,2,"div",null,me),i()(),t(29,"button",19),_("click",function(){return d(l),p(n.addNew())}),t(30,"mat-icon"),r(31,"add_circle_outline"),i()(),t(32,"button",20),_("click",function(){return d(l),p(n.refresh())}),t(33,"mat-icon"),r(34,"refresh"),i()(),t(35,"button",21),_("click",function(){return d(l),p(n.exportExcel())}),t(36,"mat-icon",22),r(37,"file_download"),i()()()()()()(),t(38,"mat-card-content")(39,"div",23)(40,"div",24)(41,"table",25),E(42,26),b(43,ki,2,4,"mat-header-cell",27)(44,wi,2,3,"mat-cell",28),T(),ce(45,qi,2,1,null,null,me),E(47,29),b(48,Hi,2,0,"mat-header-cell",30)(49,ji,5,6,"mat-cell",31),T(),b(50,Gi,1,0,"mat-header-row",32)(51,zi,1,3,"mat-row",33),i()(),b(52,Qi,2,1,"div",34),C(53,"div",35),t(54,"mat-menu",null,2),b(56,Ui,30,1,"ng-template",36),i(),t(57,"mat-menu",null,3)(59,"button",37)(60,"mat-icon"),r(61,"mail_outline"),i(),t(62,"span"),r(63,"Item 1"),i()(),t(64,"button",37)(65,"mat-icon"),r(66,"turned_in_not"),i(),t(67,"span"),r(68,"Item 2"),i()(),t(69,"button",37)(70,"mat-icon",22),r(71,"sms"),i(),t(72,"span"),r(73,"Item 3"),i()()(),b(74,Wi,2,2,"div",38),C(75,"mat-paginator",39,4),i()()()}if(a&2){let l=S(12),f=S(55);m(17),s("hidden",!n.selection.hasValue()),m(6),de("ngModel",l.value),m(4),se(n.columnDefinitions),m(14),s("dataSource",n.dataSource),m(4),se(n.columnDefinitions),m(5),s("matHeaderRowDef",n.getDisplayedColumns()),m(),s("matRowDefColumns",n.getDisplayedColumns()),m(),x(n.isLoading?52:-1),m(),L("left",n.contextMenuPosition.x)("top",n.contextMenuPosition.y),s("matMenuTriggerFor",f),m(21),x(n.isLoading?74:-1),m(),s("length",n.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",ke(16,Mi))}},dependencies:[pt,st,lt,mt,ct,X,j,q,H,ee,Z,P,N,y,A,Re,Ve,J,Y,U,Q,G,z,je,Te,De,Ee,W,rt,at,St,ut,ft,ht,Ct,_t,xt,bt,gt,vt,Mt,yt,te,wt,dt,Fe,Be,Et,Dt,Ae,Pe,Le,Ne,O,Xe,K],styles:["[_nghost-%COMP%]     .search-box .mat-mdc-text-field-wrapper{height:40px!important}[_nghost-%COMP%]     .search-box .mat-mdc-form-field-flex{margin-top:-7px!important}[_nghost-%COMP%]     .search-box .mat-mdc-floating-label{height:32px}[_nghost-%COMP%]     .search-box .mat-mdc-input-element{font-size:13px!important}[_nghost-%COMP%]     .search-box .search-label{font-size:13px;top:-4px;position:relative}[_nghost-%COMP%]     .column-filter .mat-mdc-select-arrow{display:none}[_nghost-%COMP%]     .advance-table .mat-mdc-header-cell{font-weight:500}"],data:{animation:[Je]}})}}return o})();var Nt=class{constructor(c={}){this.bookingId=c.bookingId||this.getRandomID(),this.guestName=c.guestName||"",this.hotelRoomNumber=c.hotelRoomNumber||"",this.pickupLocation=c.pickupLocation||"",this.dropoffLocation=c.dropoffLocation||"",this.pickupDate=c.pickupDate||Pt(new Date,"yyyy-MM-ddTHH:mm:ss","en"),this.dropoffDate=c.dropoffDate||Pt(new Date,"yyyy-MM-ddTHH:mm:ss","en"),this.cabModel=c.cabModel||"",this.licensePlate=c.licensePlate||"",this.bookingStatus=c.bookingStatus||"",this.driverName=c.driverName||"",this.driverContact=c.driverContact||"",this.amount=c.amount||0,this.specialRequests=c.specialRequests||"",this.bookingSource=c.bookingSource||""}getRandomID(){let c=()=>(1+Math.random())*65536|0;return c().toString(16)+c().toString(16)}};var fe=(()=>{class o{constructor(e){this.httpClient=e,this.API_URL="assets/data/cabBookings.json"}getAllCabBookings(){return this.httpClient.get(this.API_URL).pipe(Ce(e=>console.log("Fetched cab bookings:",e)),B(this.handleError))}addCabBooking(e){return this.httpClient.post(this.API_URL,e).pipe(Ce(a=>console.log("Added cab booking:",a)),B(this.handleError))}updateCabBooking(e){return this.httpClient.put(`${this.API_URL}/${e.bookingId}`,e).pipe(Ce(a=>console.log("Updated cab booking:",a)),B(this.handleError))}deleteCabBooking(e){return this.httpClient.delete(`${this.API_URL}/${e}`).pipe(Ce(()=>console.log("Deleted cab booking with ID:",e)),B(this.handleError))}handleError(e){return console.error("An error occurred:",e.message),xe(()=>new Error("Something went wrong; please try again later."))}static{this.\u0275fac=function(a){return new(a||o)(Me(Ie))}}static{this.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Xi(o,c){o&1&&(t(0,"mat-error"),r(1," Guest Name is "),t(2,"strong"),r(3,"required"),i()())}function Yi(o,c){o&1&&(t(0,"mat-error"),r(1," Hotel Room Number is "),t(2,"strong"),r(3,"required"),i()())}function Ji(o,c){o&1&&(t(0,"mat-error"),r(1," Pickup Location is "),t(2,"strong"),r(3,"required"),i()())}function Ki(o,c){o&1&&(t(0,"mat-error"),r(1," Dropoff Location is "),t(2,"strong"),r(3,"required"),i()())}function Zi(o,c){o&1&&(t(0,"mat-error"),r(1," Driver Contact is "),t(2,"strong"),r(3,"required"),i()())}var ti=(()=>{class o{constructor(e,a,n,l){this.dialogRef=e,this.data=a,this.cabBookingService=n,this.fb=l,this.url=null,this.formControl=new Ut("",[D.required]),this.action=a.action,this.action==="edit"?(this.dialogTitle="Cab Booking :"+a.cabBooking.guestName,this.cabBooking=a.cabBooking):(this.dialogTitle="New Cab Booking",this.cabBooking=new Nt),this.cabBookingForm=this.createCabBookingForm()}getErrorMessage(){return this.formControl.hasError("required")?"Required field":this.formControl.hasError("custom")?"Not a valid input":""}createCabBookingForm(){return this.fb.group({bookingId:[this.cabBooking.bookingId],guestName:[this.cabBooking.guestName,[D.required]],hotelRoomNumber:[this.cabBooking.hotelRoomNumber,[D.required]],cabModel:[this.cabBooking.cabModel],pickupLocation:[this.cabBooking.pickupLocation,[D.required]],dropoffLocation:[this.cabBooking.dropoffLocation,[D.required]],pickupDate:[this.cabBooking.pickupDate,[D.required]],dropoffDate:[this.cabBooking.dropoffDate,[D.required]],bookingStatus:[this.cabBooking.bookingStatus],driverName:[this.cabBooking.driverName],driverContact:[this.cabBooking.driverContact]})}submit(){this.cabBookingForm.valid&&(this.action==="edit"?this.cabBookingService.updateCabBooking(this.cabBookingForm.getRawValue()):this.cabBookingService.addCabBooking(this.cabBookingForm.getRawValue()),console.log("row0----"+this.cabBookingForm.getRawValue()),this.dialogRef.close(this.cabBookingForm.getRawValue()))}onNoClick(){this.dialogRef.close()}onSelectFile(e){let a=e.target;if(a.files&&a.files[0]){let n=new FileReader;n.readAsDataURL(a.files[0]),n.onload=l=>{l.target&&(this.url=l.target.result)}}}static{this.\u0275fac=function(a){return new(a||o)(g(ie),g(ne),g(fe),g(We))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-booking-form-dialog"]],features:[Se([{provide:Ze,useValue:"en-GB"}])],decls:91,vars:16,consts:[["pickupPicker",""],["dropoffPicker",""],[1,"dialogContainer"],[1,"modalHeader"],[1,"avatarDetails"],[1,"modalTitle"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"form-field-full",3,"formGroup"],[1,"row","m-b-24"],[1,"col-sm-6"],["appearance","outline","subscriptSizing","dynamic",1,"example-full-width"],["matInput","","formControlName","guestName","required",""],["matInput","","formControlName","hotelRoomNumber","required",""],["matInput","","formControlName","cabModel"],["matInput","","formControlName","pickupLocation","required",""],["matInput","","formControlName","dropoffLocation","required",""],["matInput","","formControlName","pickupDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","dropoffDate",3,"matDatepicker"],["formControlName","bookingStatus"],[3,"value"],["matInput","","formControlName","driverName"],["matInput","","formControlName","driverContact","required",""],[1,"col-sm-12"],[1,"example-button-row"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","warn","tabindex","-1","type","button",3,"click"]],template:function(a,n){if(a&1){let l=v();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),r(4),i()(),t(5,"button",6),_("click",function(){return d(l),p(n.dialogRef.close())}),t(6,"mat-icon"),r(7,"close"),i()()(),t(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),r(14,"Guest Name"),i(),C(15,"input",12),b(16,Xi,4,0,"mat-error"),i()(),t(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),r(20,"Hotel Room Number"),i(),C(21,"input",13),b(22,Yi,4,0,"mat-error"),i()()(),t(23,"div",9)(24,"div",10)(25,"mat-form-field",11)(26,"mat-label"),r(27,"Cab Model"),i(),C(28,"input",14),i()(),t(29,"div",10)(30,"mat-form-field",11)(31,"mat-label"),r(32,"Pickup Location"),i(),C(33,"input",15),b(34,Ji,4,0,"mat-error"),i()()(),t(35,"div",9)(36,"div",10)(37,"mat-form-field",11)(38,"mat-label"),r(39,"Dropoff Location"),i(),C(40,"input",16),b(41,Ki,4,0,"mat-error"),i()(),t(42,"div",10)(43,"mat-form-field",11)(44,"mat-label"),r(45,"Pickup Date & Time"),i(),C(46,"input",17)(47,"mat-datepicker-toggle",18)(48,"mat-datepicker",null,0),i()()(),t(50,"div",9)(51,"div",10)(52,"mat-form-field",11)(53,"mat-label"),r(54,"Dropoff Date & Time"),i(),C(55,"input",19)(56,"mat-datepicker-toggle",18)(57,"mat-datepicker",null,1),i()(),t(59,"div",10)(60,"mat-form-field",11)(61,"mat-label"),r(62,"Booking Status"),i(),t(63,"mat-select",20)(64,"mat-option",21),r(65,"Pending"),i(),t(66,"mat-option",21),r(67,"Confirmed"),i(),t(68,"mat-option",21),r(69,"Completed"),i(),t(70,"mat-option",21),r(71,"Cancelled"),i()()()()(),t(72,"div",9)(73,"div",10)(74,"mat-form-field",11)(75,"mat-label"),r(76,"Driver Name"),i(),C(77,"input",22),i()(),t(78,"div",10)(79,"mat-form-field",11)(80,"mat-label"),r(81,"Driver Contact"),i(),C(82,"input",23),b(83,Zi,4,0,"mat-error"),i()()(),t(84,"div",9)(85,"div",24)(86,"div",25)(87,"button",26),_("click",function(){return d(l),p(n.submit())}),r(88,"Save"),i(),t(89,"button",27),_("click",function(){return d(l),p(n.onNoClick())}),r(90,"Cancel"),i()()()()()()()}if(a&2){let l,f,M,k,ae,zt=S(49),Qt=S(58);m(4),h(" ",n.dialogTitle," "),m(5),s("formGroup",n.cabBookingForm),m(7),x((l=n.cabBookingForm.get("guestName"))!=null&&l.hasError("required")||(l=n.cabBookingForm.get("guestName"))!=null&&l.touched?16:-1),m(6),x((f=n.cabBookingForm.get("hotelRoomNumber"))!=null&&f.hasError("required")||(f=n.cabBookingForm.get("hotelRoomNumber"))!=null&&f.touched?22:-1),m(12),x((M=n.cabBookingForm.get("pickupLocation"))!=null&&M.hasError("required")||(M=n.cabBookingForm.get("pickupLocation"))!=null&&M.touched?34:-1),m(7),x((k=n.cabBookingForm.get("dropoffLocation"))!=null&&k.hasError("required")||(k=n.cabBookingForm.get("dropoffLocation"))!=null&&k.touched?41:-1),m(5),s("matDatepicker",zt),m(),s("for",zt),m(8),s("matDatepicker",Qt),m(),s("for",Qt),m(8),s("value","Pending"),m(2),s("value","Confirmed"),m(2),s("value","Completed"),m(2),s("value","Cancelled"),m(13),x((ae=n.cabBookingForm.get("driverContact"))!=null&&ae.hasError("required")||(ae=n.cabBookingForm.get("driverContact"))!=null&&ae.touched?83:-1),m(4),s("disabled",!n.cabBookingForm.valid)}},dependencies:[y,$,A,P,N,oe,z,Ge,qe,G,He,Ue,Q,ze,Qe,X,j,q,$e,H,ee,Z,Ke,ot,tt,it,nt,J,Y,U,W,et,Rt],styles:[".hoverable[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:36px;width:36px;border-radius:50%}.hoverable[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;font-size:10px;transform:translate(-50%,-50%);z-index:2}.hoverable[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;inset:0;background-color:#ffffff80;pointer-events:none;border-radius:50%;z-index:1}.hoverable[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%], .hoverable[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#tableFileInput[_ngcontent-%COMP%]{display:none}"]})}}return o})();var ii=(()=>{class o{constructor(e,a,n){this.dialogRef=e,this.data=a,this.cabBookingService=n}onNoClick(){this.dialogRef.close()}confirmDelete(){this.cabBookingService.deleteCabBooking(this.data.bookingId),this.dialogRef.close(this.data.bookingId)}static{this.\u0275fac=function(a){return new(a||o)(g(ie),g(ne),g(fe))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-booking-delete"]],decls:25,vars:4,consts:[[1,"dialogContainer"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"delete-list"],[1,"font-weight-bold"],["mat-dialog-actions","",1,"mb-1"],["mat-flat-button","","color","warn",3,"click","mat-dialog-close"],["mat-flat-button","","tabindex","-1",3,"click"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"h3",1),r(2,"Are you sure?"),i(),t(3,"div",2)(4,"ul",3)(5,"li")(6,"p")(7,"span",4),r(8," Guest Name: "),i(),r(9),i()(),t(10,"li")(11,"p")(12,"span",4),r(13,"Room No: "),i(),r(14),i()(),t(15,"li")(16,"p")(17,"span",4),r(18,"Cab Model: "),i(),r(19),i()()()(),t(20,"div",5)(21,"button",6),_("click",function(){return n.confirmDelete()}),r(22," Delete "),i(),t(23,"button",7),_("click",function(){return n.onNoClick()}),r(24,"Cancel"),i()()()),a&2&&(m(9),I(n.data.guestName),m(5),h("",n.data.hotelRoomNumber," "),m(5),h("",n.data.cabModel," "),m(2),s("mat-dialog-close",1))},dependencies:[Bt,oe,Ft,y,$,It],styles:[".delete-list[_ngcontent-%COMP%]{padding:0;list-style-type:none}"]})}}return o})();var en=["filter"],tn=()=>[5,10,25,100];function nn(o,c){if(o&1){let e=v();t(0,"mat-option")(1,"mat-checkbox",41),_("click",function(n){return d(e),p(n.stopPropagation())}),ue("ngModelChange",function(n){let l=d(e).$implicit;return pe(l.visible,n)||(l.visible=n),p(n)}),r(2),i()()}if(o&2){let e=c.$implicit;m(),de("ngModel",e.visible),m(),h(" ",e.label," ")}}function on(o,c){if(o&1){let e=v();t(0,"mat-header-cell",42)(1,"mat-checkbox",43),_("change",function(n){d(e);let l=u();return p(n?l.masterToggle():null)}),i()()}if(o&2){let e=u();s("ngClass","tbl-col-width-per-6"),m(),s("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("ngClass","tbl-checkbox")}}function an(o,c){if(o&1){let e=v();t(0,"mat-cell",42)(1,"mat-checkbox",44),_("click",function(n){return d(e),p(n.stopPropagation())})("change",function(n){let l=d(e).$implicit,f=u();return p(n?f.selection.toggle(l):null)}),i()()}if(o&2){let e=c.$implicit,a=u();s("ngClass","tbl-col-width-per-6"),m(),s("checked",a.selection.isSelected(e))("ngClass","tbl-checkbox")}}function rn(o,c){}function ln(o,c){if(o&1&&(t(0,"mat-header-cell",48)(1,"span",49),r(2),i()()),o&2){let e=u(3).$implicit;m(2),I(e.label)}}function mn(o,c){if(o&1){let e=v();t(0,"mat-cell",50),_("contextmenu",function(n){let l=d(e).$implicit,f=u(4);return p(f.onContextMenu(n,l))}),t(1,"span",51),r(2),i(),t(3,"span",49),r(4),we(5,"date"),i()()}if(o&2){let e=c.$implicit,a=u(3).$implicit;m(2),h("",a.label,":"),m(2),h(" ",ye(5,2,e[a.def],"MM/dd/yyyy"),"")}}function cn(o,c){if(o&1&&(E(0,45),b(1,ln,3,1,"mat-header-cell",46)(2,mn,6,5,"mat-cell",47),T()),o&2){let e=u(2).$implicit;s("matColumnDef",e.def)}}function sn(o,c){if(o&1&&(t(0,"mat-header-cell",48)(1,"span",49),r(2),i()()),o&2){let e=u(3).$implicit;m(2),I(e.label)}}function dn(o,c){if(o&1){let e=v();t(0,"mat-cell",50),_("contextmenu",function(n){let l=d(e).$implicit,f=u(4);return p(f.onContextMenu(n,l))}),t(1,"span",51),r(2),i(),t(3,"span",49),r(4),i()()}if(o&2){let e=c.$implicit,a=u(3).$implicit;m(2),h("",a.label,":"),m(2),h(" ",e[a.def],"")}}function pn(o,c){if(o&1&&(E(0,45),b(1,sn,3,1,"mat-header-cell",46)(2,dn,5,2,"mat-cell",47),T()),o&2){let e=u(2).$implicit;s("matColumnDef",e.def)}}function un(o,c){if(o&1&&b(0,cn,3,1,"ng-container",45)(1,pn,3,1,"ng-container",45),o&2){let e=u().$implicit;x(e.type==="date"?0:1)}}function _n(o,c){if(o&1&&b(0,rn,0,0)(1,un,2,1),o&2){let e=c.$implicit;x(e.type==="check"||e.type==="actionBtn"?0:1)}}function fn(o,c){o&1&&(t(0,"mat-header-cell",52),r(1,"Actions"),i())}function Cn(o,c){if(o&1){let e=v();t(0,"mat-cell",52)(1,"button",53),_("click",function(n){return d(e),p(n.stopPropagation())})("click",function(){let n=d(e).$implicit,l=u();return p(l.editCall(n))}),C(2,"app-feather-icons",54),i(),t(3,"button",53),_("click",function(n){return d(e),p(n.stopPropagation())})("click",function(){let n=d(e).$implicit,l=u();return p(l.deleteItem(n))}),C(4,"app-feather-icons",54),i()()}o&2&&(m(2),le("tbl-fav-edit"),s("icon","edit"),m(2),le("tbl-fav-delete"),s("icon","trash-2"))}function bn(o,c){o&1&&C(0,"mat-header-row")}function gn(o,c){if(o&1){let e=v();t(0,"mat-row",55),_("click",function(){let n=d(e).$implicit,l=u();return p(l.editCall(n))}),i()}o&2&&L("cursor","pointer")}function hn(o,c){o&1&&(t(0,"div",35),C(1,"mat-progress-spinner",56),i()),o&2&&(m(),s("diameter",40))}function xn(o,c){if(o&1){let e=v();t(0,"button",57),_("click",function(){d(e);let n=u();return p(n.addNew())}),t(1,"mat-icon"),r(2,"add_circle_outline"),i(),t(3,"span"),r(4,"Add Record"),i()(),t(5,"button",57),_("click",function(){let n=d(e).item,l=u();return p(l.editCall(n))}),t(6,"mat-icon"),r(7,"edit"),i(),t(8,"span"),r(9,"Edit Record"),i()(),t(10,"button",57),_("click",function(){let n=d(e).item,l=u();return p(l.deleteItem(n))}),t(11,"mat-icon"),r(12,"delete"),i(),t(13,"span"),r(14,"Delete Record"),i()(),t(15,"button",57),_("click",function(){d(e);let n=u();return p(n.refresh())}),t(16,"mat-icon"),r(17,"refresh"),i(),t(18,"span"),r(19,"Refresh Record"),i()(),t(20,"button",58)(21,"mat-icon"),r(22,"visibility_off"),i(),t(23,"span"),r(24,"Disable"),i()(),t(25,"button",59)(26,"mat-icon"),r(27,"settings_ethernet"),i(),t(28,"span"),r(29," Nested Menu"),i()()}if(o&2){u();let e=S(59);m(25),s("matMenuTriggerFor",e)}}function vn(o,c){if(o&1&&(t(0,"div",60),r(1," No results "),i()),o&2){let e=u();L("display",e.dataSource.data.length===0?"":"none")}}var ni=(()=>{class o{constructor(e,a,n){this.dialog=e,this.cabBookingService=a,this.snackBar=n,this.columnDefinitions=[{def:"select",label:"Select",type:"check",visible:!0},{def:"bookingId",label:"Booking ID",type:"text",visible:!1},{def:"guestName",label:"Guest Name",type:"text",visible:!0},{def:"hotelRoomNumber",label:"Room Number",type:"text",visible:!0},{def:"pickupLocation",label:"Pickup Location",type:"text",visible:!0},{def:"dropoffLocation",label:"Dropoff Location",type:"text",visible:!0},{def:"pickupDate",label:"Pickup Date",type:"date",visible:!0},{def:"dropoffDate",label:"Dropoff Date",type:"date",visible:!0},{def:"cabModel",label:"Cab Model",type:"text",visible:!1},{def:"licensePlate",label:"License Plate",type:"text",visible:!1},{def:"bookingStatus",label:"Status",type:"text",visible:!0},{def:"driverName",label:"Driver Name",type:"text",visible:!0},{def:"driverContact",label:"Driver Contact",type:"text",visible:!0},{def:"amount",label:"Amount",type:"number",visible:!1},{def:"specialRequests",label:"Special Requests",type:"text",visible:!1},{def:"bookingSource",label:"Booking Source",type:"text",visible:!1},{def:"actions",label:"Actions",type:"actionBtn",visible:!0}],this.dataSource=new kt([]),this.selection=new Oe(!0,[]),this.destroy$=new he,this.contextMenuPosition={x:"0px",y:"0px"},this.isLoading=!0}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.loadData()}getDisplayedColumns(){return this.columnDefinitions.filter(e=>e.visible).map(e=>e.def)}addNew(){this.openDialog("add")}editCall(e){this.openDialog("edit",e)}openDialog(e,a){this.dialog.open(ti,{width:"60vw",maxWidth:"100vw",data:{cabBooking:a,action:e},autoFocus:!1}).afterClosed().subscribe(l=>{console.log(l),l&&(e==="add"?this.dataSource.data=[l,...this.dataSource.data]:this.updateRecord(l),this.refreshTable(),this.showNotification(e==="add"?"snackbar-success":"black",`${e==="add"?"Add":"Edit"} Record Successfully...!!!`,"bottom","center"))})}updateRecord(e){let a=this.dataSource.data.findIndex(n=>n.bookingId===e.bookingId);a!==-1&&(this.dataSource.data[a]=e,this.dataSource._updateChangeSubscription())}deleteItem(e){this.dialog.open(ii,{data:e}).afterClosed().subscribe(n=>{n&&(this.dataSource.data=this.dataSource.data.filter(l=>l.bookingId!==e.bookingId),this.refreshTable(),this.showNotification("snackbar-danger","Delete Record Successfully...!!!","bottom","center"))})}refreshTable(){this.paginator.pageIndex=0,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){let a=e.target.value.trim().toLowerCase();this.dataSource.filter=a}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}removeSelectedRows(){let e=this.selection.selected.length;this.dataSource.data=this.dataSource.data.filter(a=>!this.selection.selected.includes(a)),this.selection.clear(),this.showNotification("snackbar-danger",`${e} Record(s) Deleted Successfully...!!!`,"bottom","center")}loadData(){this.cabBookingService.getAllCabBookings().subscribe({next:e=>{this.dataSource.data=e,this.isLoading=!1,this.refreshTable(),this.dataSource.filterPredicate=(a,n)=>Object.values(a).some(l=>l.toString().toLowerCase().includes(n))},error:e=>console.error(e)})}showNotification(e,a,n,l){this.snackBar.open(a,"",{duration:2e3,verticalPosition:n,horizontalPosition:l,panelClass:e})}exportExcel(){let e=this.dataSource.data.map(a=>({"Booking ID":a.bookingId,"Guest Name":a.guestName,"Room Number":a.hotelRoomNumber,"Pickup Location":a.pickupLocation,"Dropoff Location":a.dropoffLocation,"Pickup Date/Time":a.pickupDate,"Dropoff Date/Time":a.dropoffDate,"Cab Model":a.cabModel,"License Plate":a.licensePlate,Status:a.bookingStatus,"Driver Name":a.driverName,"Driver Contact":a.driverContact,Amount:a.amount,"Special Requests":a.specialRequests,"Booking Source":a.bookingSource}));Ye.exportToExcel(e,"cab_bookings")}onContextMenu(e,a){e.preventDefault(),this.contextMenuPosition.x=`${e.clientX}px`,this.contextMenuPosition.y=`${e.clientY}px`,this.contextMenu&&this.contextMenu.menu&&(this.contextMenu.menuData={item:a},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu())}static{this.\u0275fac=function(a){return new(a||o)(g(Tt),g(fe),g(Vt))}}static{this.\u0275cmp=w({type:o,selectors:[["app-cab-booking"]],viewQuery:function(a,n){if(a&1&&(F(K,5),F(te,5),F(en,5),F(O,5)),a&2){let l;V(l=R())&&(n.paginator=l.first),V(l=R())&&(n.sort=l.first),V(l=R())&&(n.filter=l.first),V(l=R())&&(n.contextMenu=l.first)}},decls:78,vars:17,consts:[["filter",""],["select",""],["contextMenuTrigger","matMenuTrigger"],["contextMenu","matMenu"],["nestedmenu","matMenu"],["paginator",""],[1,"table-header-toolbar"],[1,"row"],[1,"col-sm-8"],[1,"table-header"],["appearance","outline",1,"search-box"],[1,"search-label"],["matInput","","type","text",3,"keyup"],["matSuffix",""],[1,"col-sm-4"],[1,"right-side-btn"],["mat-icon-button","","matTooltip","Delete",1,"tbl-header-btn","text-red",3,"click","hidden"],["mat-icon-button","","matTooltip","Show/Hide Column",1,"text-indigo",3,"click"],[1,"column-filter",2,"width","200px","display","table",3,"ngModelChange","ngModel"],[1,"table-column-label"],["mat-icon-button","","matTooltip","Add",1,"tbl-header-btn","text-green",3,"click"],["mat-icon-button","","matTooltip","Refresh",1,"tbl-header-btn","text-dark-grey",3,"click"],["mat-icon-button","","matTooltip","Xlsx Download",1,"tbl-header-btn","text-blue",3,"click"],[1,"material-icons-outlined"],[1,"overflow-auto"],[1,"responsive_table"],["mat-table","","matSort","",1,"mat-cell","advance-table",3,"dataSource"],["matColumnDef","select"],[3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","actions"],["class","pr-0",4,"matHeaderCellDef"],["class","pr-0",4,"matCellDef"],[4,"matHeaderRowDef"],["matRipple","",3,"cursor","click",4,"matRowDef","matRowDefColumns"],[1,"tbl-spinner"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["matMenuContent",""],["mat-menu-item",""],[1,"no-results",3,"display"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["color","primary",3,"click","ngModelChange","ngModel"],[3,"ngClass"],["color","primary",3,"change","checked","indeterminate","ngClass"],["color","primary",3,"click","change","checked","ngClass"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"contextmenu",4,"matCellDef"],["mat-sort-header",""],[1,"truncate-text"],[3,"contextmenu"],[1,"mobile-label"],[1,"pr-0"],["mat-icon-button","","color","accent",1,"tbl-action-btn",3,"click"],[3,"icon"],["matRipple","",3,"click"],["color","primary","mode","indeterminate",3,"diameter"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"matMenuTriggerFor"],[1,"no-results"]],template:function(a,n){if(a&1){let l=v();C(0,"app-page-header"),t(1,"mat-card")(2,"mat-card-header")(3,"div",6)(4,"div",7)(5,"div",8)(6,"span",9),r(7,"Cab Bookings"),i(),t(8,"mat-form-field",10)(9,"mat-label",11),r(10,"Search..."),i(),t(11,"input",12,0),_("keyup",function(M){return d(l),p(n.applyFilter(M))}),i(),t(13,"mat-icon",13),r(14,"search"),i()()(),t(15,"div",14)(16,"div",15)(17,"button",16),_("click",function(){return d(l),p(n.removeSelectedRows())}),t(18,"mat-icon"),r(19,"delete_outline"),i()(),t(20,"button",17),_("click",function(){d(l);let M=S(24);return p(M.open())}),t(21,"mat-icon"),r(22,"filter_list"),i(),t(23,"mat-select",18,1),ue("ngModelChange",function(M){d(l);let k=S(12);return pe(k.value,M)||(k.value=M),p(M)}),t(25,"span",19),r(26,"Show/Hide Column"),i(),ce(27,nn,3,2,"mat-option",null,me),i()(),t(29,"button",20),_("click",function(){return d(l),p(n.addNew())}),t(30,"mat-icon"),r(31,"add_circle_outline"),i()(),t(32,"button",21),_("click",function(){return d(l),p(n.refresh())}),t(33,"mat-icon"),r(34,"refresh"),i()(),t(35,"button",22),_("click",function(){return d(l),p(n.exportExcel())}),t(36,"mat-icon",23),r(37,"file_download"),i()()()()()()(),t(38,"mat-card-content")(39,"div",24)(40,"div",25)(41,"table",26),E(42,27),b(43,on,2,4,"mat-header-cell",28)(44,an,2,3,"mat-cell",29),T(),ce(45,_n,2,1,null,null,me),E(47,30),b(48,fn,2,0,"mat-header-cell",31)(49,Cn,5,6,"mat-cell",32),T(),b(50,bn,1,0,"mat-header-row",33)(51,gn,1,2,"mat-row",34),i()(),b(52,hn,2,1,"div",35),C(53,"div",36,2),t(55,"mat-menu",null,3),b(57,xn,30,1,"ng-template",37),i(),t(58,"mat-menu",null,4)(60,"button",38)(61,"mat-icon"),r(62,"mail_outline"),i(),t(63,"span"),r(64,"Item 1"),i()(),t(65,"button",38)(66,"mat-icon"),r(67,"turned_in_not"),i(),t(68,"span"),r(69,"Item 2"),i()(),t(70,"button",38)(71,"mat-icon"),r(72,"sms"),i(),t(73,"span"),r(74,"Item 3"),i()()(),b(75,vn,2,2,"div",39),C(76,"mat-paginator",40,5),i()()()}if(a&2){let l=S(12),f=S(56);m(17),s("hidden",!n.selection.hasValue()),m(6),de("ngModel",l.value),m(4),se(n.columnDefinitions),m(14),s("dataSource",n.dataSource),m(4),se(n.columnDefinitions),m(5),s("matHeaderRowDef",n.getDisplayedColumns()),m(),s("matRowDefColumns",n.getDisplayedColumns()),m(),x(n.isLoading?52:-1),m(),L("left",n.contextMenuPosition.x)("top",n.contextMenuPosition.y),s("matMenuTriggerFor",f),m(22),x(n.isLoading?75:-1),m(),s("length",n.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",ke(16,tn))}},dependencies:[pt,st,lt,mt,ct,X,j,q,H,ee,Z,P,N,y,A,Re,Ve,J,Y,U,Q,G,z,je,Te,De,Ee,W,rt,at,St,ut,ft,ht,Ct,_t,xt,bt,gt,vt,Mt,yt,te,wt,dt,Fe,Be,Et,Dt,Ae,Pe,Le,Ne,O,Xe,K],styles:["[_nghost-%COMP%]     .search-box .mat-mdc-text-field-wrapper{height:40px!important}[_nghost-%COMP%]     .search-box .mat-mdc-form-field-flex{margin-top:-7px!important}[_nghost-%COMP%]     .search-box .mat-mdc-floating-label{height:32px}[_nghost-%COMP%]     .search-box .mat-mdc-input-element{font-size:13px!important}[_nghost-%COMP%]     .search-box .search-label{font-size:13px;top:-4px;position:relative}[_nghost-%COMP%]     .column-filter .mat-mdc-select-arrow{display:none}[_nghost-%COMP%]     .advance-table .mat-mdc-header-cell{font-weight:500}"],data:{animation:[Je]}})}}return o})();var ca=[{path:"",redirectTo:"cab-list",pathMatch:"full"},{path:"cab-list",component:ei},{path:"cab-booking",component:ni},{path:"**",component:Jt}];export{ca as CABS_ROUTE};
